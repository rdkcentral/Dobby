<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: DobbyIPCUtils Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Dobby<span id="projectnumber">&#160;3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classDobbyIPCUtils-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DobbyIPCUtils Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Utility methods for IPC in <a class="el" href="classDobby.html" title="The root Dobby object, runs the dbus loop.">Dobby</a>.  
 <a href="classDobbyIPCUtils.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DobbyIPCUtils_8h_source.html">DobbyIPCUtils.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DobbyIPCUtils:</div>
<div class="dyncontent">
<div class="center"><img src="classDobbyIPCUtils__inherit__graph.png" border="0" usemap="#aDobbyIPCUtils_inherit__map" alt="Inheritance graph"/></div>
<map name="aDobbyIPCUtils_inherit__map" id="aDobbyIPCUtils_inherit__map">
<area shape="rect" title="Utility methods for IPC in Dobby." alt="" coords="7,79,122,104"/>
<area shape="rect" href="classIDobbyIPCUtils.html" title=" " alt="" coords="5,5,124,31"/>
<area shape="poly" title=" " alt="" coords="67,44,67,79,62,79,62,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for DobbyIPCUtils:</div>
<div class="dyncontent">
<div class="center"><img src="classDobbyIPCUtils__coll__graph.png" border="0" usemap="#aDobbyIPCUtils_coll__map" alt="Collaboration graph"/></div>
<map name="aDobbyIPCUtils_coll__map" id="aDobbyIPCUtils_coll__map">
<area shape="rect" title="Utility methods for IPC in Dobby." alt="" coords="7,79,122,104"/>
<area shape="rect" href="classIDobbyIPCUtils.html" title=" " alt="" coords="5,5,124,31"/>
<area shape="poly" title=" " alt="" coords="67,44,67,79,62,79,62,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0438bd6400b1317397f1be26f737db3f" id="r_a0438bd6400b1317397f1be26f737db3f"><td class="memItemLeft" align="right" valign="top"><a id="a0438bd6400b1317397f1be26f737db3f" name="a0438bd6400b1317397f1be26f737db3f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DobbyIPCUtils</b> (const std::string &amp;systemDbusAddress, const std::shared_ptr&lt; <a class="el" href="classAI__IPC_1_1IIpcService.html">AI_IPC::IIpcService</a> &gt; &amp;systemIpcService)</td></tr>
<tr class="separator:a0438bd6400b1317397f1be26f737db3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d97d479fbacead3cb9bd1b5d28cc04" id="r_af2d97d479fbacead3cb9bd1b5d28cc04"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classAI__IPC_1_1IAsyncReplyGetter.html">AI_IPC::IAsyncReplyGetter</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#af2d97d479fbacead3cb9bd1b5d28cc04">ipcInvokeMethod</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus, const <a class="el" href="structAI__IPC_1_1Method.html">AI_IPC::Method</a> &amp;method, const AI_IPC::VariantList &amp;args, int timeoutMs) const override</td></tr>
<tr class="memdesc:af2d97d479fbacead3cb9bd1b5d28cc04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invokes the ipc method.  <br /></td></tr>
<tr class="separator:af2d97d479fbacead3cb9bd1b5d28cc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc125a5bf8281fb896e4f225da0bf23d" id="r_afc125a5bf8281fb896e4f225da0bf23d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#afc125a5bf8281fb896e4f225da0bf23d">ipcInvokeMethod</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus, const <a class="el" href="structAI__IPC_1_1Method.html">AI_IPC::Method</a> &amp;method, const AI_IPC::VariantList &amp;args, AI_IPC::VariantList &amp;replyArgs) const override</td></tr>
<tr class="memdesc:afc125a5bf8281fb896e4f225da0bf23d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invokes the ipc method.  <br /></td></tr>
<tr class="separator:afc125a5bf8281fb896e4f225da0bf23d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49c03a77791e6671a8025f69e953ddeb" id="r_a49c03a77791e6671a8025f69e953ddeb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#a49c03a77791e6671a8025f69e953ddeb">ipcEmitSignal</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus, const <a class="el" href="structAI__IPC_1_1Signal.html">AI_IPC::Signal</a> &amp;signal, const AI_IPC::VariantList &amp;args) const override</td></tr>
<tr class="memdesc:a49c03a77791e6671a8025f69e953ddeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends out a signal over dbus.  <br /></td></tr>
<tr class="separator:a49c03a77791e6671a8025f69e953ddeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04107ce63709c358803ba49318b1eb00" id="r_a04107ce63709c358803ba49318b1eb00"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#a04107ce63709c358803ba49318b1eb00">ipcServiceAvailable</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus, const std::string &amp;serviceName) const override</td></tr>
<tr class="memdesc:a04107ce63709c358803ba49318b1eb00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queries if the given service is available on the bus.  <br /></td></tr>
<tr class="separator:a04107ce63709c358803ba49318b1eb00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7629cf77635161653c58ba021096b3d" id="r_af7629cf77635161653c58ba021096b3d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#af7629cf77635161653c58ba021096b3d">ipcRegisterServiceHandler</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus, const std::string &amp;serviceName, const std::function&lt; void(bool)&gt; &amp;handlerFunc) override</td></tr>
<tr class="memdesc:af7629cf77635161653c58ba021096b3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a callback function that will be called when the given service is added or removed from the bus.  <br /></td></tr>
<tr class="separator:af7629cf77635161653c58ba021096b3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a135d8e543a5b05ad2d0abbe709d172fc" id="r_a135d8e543a5b05ad2d0abbe709d172fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#a135d8e543a5b05ad2d0abbe709d172fc">ipcRegisterSignalHandler</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus, const <a class="el" href="structAI__IPC_1_1Signal.html">AI_IPC::Signal</a> &amp;signal, const AI_IPC::SignalHandler &amp;handlerFunc) override</td></tr>
<tr class="memdesc:a135d8e543a5b05ad2d0abbe709d172fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a callback function that will be called when the given signal is received on the bus.  <br /></td></tr>
<tr class="separator:a135d8e543a5b05ad2d0abbe709d172fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10bfc0ee540de724056c3a24e4a4a6b0" id="r_a10bfc0ee540de724056c3a24e4a4a6b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#a10bfc0ee540de724056c3a24e4a4a6b0">ipcUnregisterHandler</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus, int handlerId) override</td></tr>
<tr class="memdesc:a10bfc0ee540de724056c3a24e4a4a6b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregisters either a service or signal handler.  <br /></td></tr>
<tr class="separator:a10bfc0ee540de724056c3a24e4a4a6b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab98a1b032450981adce88013a08d7883" id="r_ab98a1b032450981adce88013a08d7883"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#ab98a1b032450981adce88013a08d7883">ipcDbusAddress</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus) const override</td></tr>
<tr class="memdesc:ab98a1b032450981adce88013a08d7883"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns complete address to the dbus daemon.  <br /></td></tr>
<tr class="separator:ab98a1b032450981adce88013a08d7883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68c07e9e6320cfebe36d7bb58da3c0d3" id="r_a68c07e9e6320cfebe36d7bb58da3c0d3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#a68c07e9e6320cfebe36d7bb58da3c0d3">ipcDbusSocketPath</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus) const override</td></tr>
<tr class="memdesc:a68c07e9e6320cfebe36d7bb58da3c0d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns just the path to the socket for the dbus daemon.  <br /></td></tr>
<tr class="separator:a68c07e9e6320cfebe36d7bb58da3c0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a044d827e1bb6656f73aa741182ac4" id="r_a67a044d827e1bb6656f73aa741182ac4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#a67a044d827e1bb6656f73aa741182ac4">setAIDbusAddress</a> (bool privateBus, const std::string &amp;address)</td></tr>
<tr class="memdesc:a67a044d827e1bb6656f73aa741182ac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the dbus address for one of the AI dbus-daemons.  <br /></td></tr>
<tr class="separator:a67a044d827e1bb6656f73aa741182ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9e1023231e26717e9bf457027c1af2ad" id="r_a9e1023231e26717e9bf457027c1af2ad"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classDobbyIpcBus.html">DobbyIpcBus</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyIPCUtils.html#a9e1023231e26717e9bf457027c1af2ad">getIpcBus</a> (const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;bus) const</td></tr>
<tr class="memdesc:a9e1023231e26717e9bf457027c1af2ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function to simply return the bus object associated with the given bus id.  <br /></td></tr>
<tr class="separator:a9e1023231e26717e9bf457027c1af2ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3be726805a7df2be53d7e1ca732e9123" id="r_a3be726805a7df2be53d7e1ca732e9123"><td class="memItemLeft" align="right" valign="top"><a id="a3be726805a7df2be53d7e1ca732e9123" name="a3be726805a7df2be53d7e1ca732e9123"></a>
std::map&lt; <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a>, std::shared_ptr&lt; <a class="el" href="classDobbyIpcBus.html">DobbyIpcBus</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mIpcBuses</b></td></tr>
<tr class="separator:a3be726805a7df2be53d7e1ca732e9123"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classIDobbyIPCUtils"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classIDobbyIPCUtils')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classIDobbyIPCUtils.html">IDobbyIPCUtils</a></td></tr>
<tr class="memitem:aa2bbe0bc876ca7cd2436b01a826302a6 inherit pub_types_classIDobbyIPCUtils" id="r_aa2bbe0bc876ca7cd2436b01a826302a6"><td class="memItemLeft" align="right" valign="top"><a id="aa2bbe0bc876ca7cd2436b01a826302a6" name="aa2bbe0bc876ca7cd2436b01a826302a6"></a>enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> { <b>NoneBus</b>
, <b>SystemBus</b>
, <b>AIPrivateBus</b>
, <b>AIPublicBus</b>
 }</td></tr>
<tr class="memdesc:aa2bbe0bc876ca7cd2436b01a826302a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of dbus to call methods on / emit signals. <br /></td></tr>
<tr class="separator:aa2bbe0bc876ca7cd2436b01a826302a6 inherit pub_types_classIDobbyIPCUtils"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility methods for IPC in <a class="el" href="classDobby.html" title="The root Dobby object, runs the dbus loop.">Dobby</a>. </p>
<dl class="section see"><dt>See also</dt><dd>IDobbyUtils </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9e1023231e26717e9bf457027c1af2ad" name="a9e1023231e26717e9bf457027c1af2ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e1023231e26717e9bf457027c1af2ad">&#9670;&#160;</a></span>getIpcBus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classDobbyIpcBus.html">DobbyIpcBus</a> &gt; DobbyIPCUtils::getIpcBus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility function to simply return the bus object associated with the given bus id. </p>
<p>Note no need for locking in this method as the bus objects should have been created in the construction and only deleted in the destructor. The only thing we need to check is if the <em>bus</em> param is valid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus to get.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>on success a shared_ptr to the bus object, on failure a nullptr. </dd></dl>

</div>
</div>
<a id="ab98a1b032450981adce88013a08d7883" name="ab98a1b032450981adce88013a08d7883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab98a1b032450981adce88013a08d7883">&#9670;&#160;</a></span>ipcDbusAddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string DobbyIPCUtils::ipcDbusAddress </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns complete address to the dbus daemon. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus to get the socket path for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the path to the socket, or an empty string if no socket is available. </dd></dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#a3ad31ffdad4082ee445b66286c53a426">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="a68c07e9e6320cfebe36d7bb58da3c0d3" name="a68c07e9e6320cfebe36d7bb58da3c0d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68c07e9e6320cfebe36d7bb58da3c0d3">&#9670;&#160;</a></span>ipcDbusSocketPath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string DobbyIPCUtils::ipcDbusSocketPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns just the path to the socket for the dbus daemon. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus to get the socket path for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the path to the socket, or an empty string if no socket is available. </dd></dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#a14b7ffb7fb6eb8375ac3e0ab9b2d0e1c">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="a49c03a77791e6671a8025f69e953ddeb" name="a49c03a77791e6671a8025f69e953ddeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49c03a77791e6671a8025f69e953ddeb">&#9670;&#160;</a></span>ipcEmitSignal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyIPCUtils::ipcEmitSignal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAI__IPC_1_1Signal.html">AI_IPC::Signal</a> &amp;&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const AI_IPC::VariantList &amp;&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends out a signal over dbus. </p>
<p>This is a pure wrapper around the <a class="el" href="classIpcService.html#af9962a553561ec2605aa21304804ff0c" title="Emit a signal.">IpcService::emitSignal</a> function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus to emit the signal on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal</td><td>The signal details. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">args</td><td>The signal args.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise false. </dd></dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#a6ca897ae7f85849f9acc564d285f957f">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="afc125a5bf8281fb896e4f225da0bf23d" name="afc125a5bf8281fb896e4f225da0bf23d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc125a5bf8281fb896e4f225da0bf23d">&#9670;&#160;</a></span>ipcInvokeMethod() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyIPCUtils::ipcInvokeMethod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAI__IPC_1_1Method.html">AI_IPC::Method</a> &amp;&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const AI_IPC::VariantList &amp;&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AI_IPC::VariantList &amp;&#160;</td>
          <td class="paramname"><em>replyArgs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invokes the ipc method. </p>
<p>This is a pure wrapper around the <a class="el" href="classIpcService.html#af342303de84e188a478fd7721cb4e930" title="Invoke a method and get reply asynchronously.">IpcService::invokeMethod</a> function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus call the method on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">method</td><td>The method to call. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">args</td><td>The method args </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">replyArgs</td><td>The reply.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise false. </dd></dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#a27d44a09f04afc5ee559a35da14175cf">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="af2d97d479fbacead3cb9bd1b5d28cc04" name="af2d97d479fbacead3cb9bd1b5d28cc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d97d479fbacead3cb9bd1b5d28cc04">&#9670;&#160;</a></span>ipcInvokeMethod() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classAI__IPC_1_1IAsyncReplyGetter.html">AI_IPC::IAsyncReplyGetter</a> &gt; DobbyIPCUtils::ipcInvokeMethod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAI__IPC_1_1Method.html">AI_IPC::Method</a> &amp;&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const AI_IPC::VariantList &amp;&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invokes the ipc method. </p>
<p>This is a pure wrapper around the <a class="el" href="classIpcService.html#af342303de84e188a478fd7721cb4e930" title="Invoke a method and get reply asynchronously.">IpcService::invokeMethod</a> function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus call the method on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">method</td><td>The method to call. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">args</td><td>The method args </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeoutMs</td><td>Timeout in milliseconds, -1 for default (5 seconds)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>shared pointer pointing to a reply getter to receive reply asynchronously, or nullptr on failure. </dd></dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#ac693ed7cbaa4e7bb08627d639c99a296">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="af7629cf77635161653c58ba021096b3d" name="af7629cf77635161653c58ba021096b3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7629cf77635161653c58ba021096b3d">&#9670;&#160;</a></span>ipcRegisterServiceHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DobbyIPCUtils::ipcRegisterServiceHandler </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>serviceName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(bool)&gt; &amp;&#160;</td>
          <td class="paramname"><em>handlerFunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers a callback function that will be called when the given service is added or removed from the bus. </p>
<p>This in turn is useful for hooks to manage situations where the daemon they are talking to has crashed / restarted.</p>
<p>Case in point is the Jumper hook, it wants to know if the daemon has crashed so it doesn't block container startup by trying to talk to a nonexisting daemon. And likewise it wants to know when it's arrived back so it can re-create any state stored in the daemon.</p>
<p>To remove the handler call <em>ipcUnregisterHandler</em> with the handler id returned by this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus to watch the service on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">serviceName</td><td>The name of the service to look out for. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handlerFunc</td><td>Callback function called when the service is added or removed. If added the argument supplied will be true, if removed it will be false.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if the notifier is successifully added then a positive handler id will be returned, otherwise -1 </dd></dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#a2317a337681c475c056e83620b837734">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="a135d8e543a5b05ad2d0abbe709d172fc" name="a135d8e543a5b05ad2d0abbe709d172fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a135d8e543a5b05ad2d0abbe709d172fc">&#9670;&#160;</a></span>ipcRegisterSignalHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DobbyIPCUtils::ipcRegisterSignalHandler </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAI__IPC_1_1Signal.html">AI_IPC::Signal</a> &amp;&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const AI_IPC::SignalHandler &amp;&#160;</td>
          <td class="paramname"><em>handlerFunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers a callback function that will be called when the given signal is received on the bus. </p>
<p>This is a pure wrapper around the <a class="el" href="classIpcService.html#abb2f3e3e96d5b4e272c56f739973950f" title="Register a signal handler.">IpcService.registerSignalHandler</a> function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus to watch for the signal on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal</td><td>The signal details to watch for. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handlerFunc</td><td>Callback function called when the signal is received.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if the handler is successifully added then a positive handler id will be returned, otherwise -1 </dd></dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#aa1b71c85531f929aa0babfde558862e6">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="a04107ce63709c358803ba49318b1eb00" name="a04107ce63709c358803ba49318b1eb00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04107ce63709c358803ba49318b1eb00">&#9670;&#160;</a></span>ipcServiceAvailable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyIPCUtils::ipcServiceAvailable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>serviceName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queries if the given service is available on the bus. </p>
<p>This is a pure wrapper around the IpcService::serviceAvailable function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">serviceName</td><td>The service to query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the service is available, otherwise false. </dd></dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#ac7c2468b0bfaf83d774871793b71611a">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="a10bfc0ee540de724056c3a24e4a4a6b0" name="a10bfc0ee540de724056c3a24e4a4a6b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10bfc0ee540de724056c3a24e4a4a6b0">&#9670;&#160;</a></span>ipcUnregisterHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DobbyIPCUtils::ipcUnregisterHandler </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyIPCUtils.html#aa2bbe0bc876ca7cd2436b01a826302a6">BusType</a> &amp;&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>handlerId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregisters either a service or signal handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus to remove the handler for. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handlerId</td><td>The integer handler id returned by the register function. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classIDobbyIPCUtils.html#a2ad389188ebbd4f027c6a6b669e4e09d">IDobbyIPCUtils</a>.</p>

</div>
</div>
<a id="a67a044d827e1bb6656f73aa741182ac4" name="a67a044d827e1bb6656f73aa741182ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67a044d827e1bb6656f73aa741182ac4">&#9670;&#160;</a></span>setAIDbusAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyIPCUtils::setAIDbusAddress </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>privateBus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the dbus address for one of the AI dbus-daemons. </p>
<p>The address is expected to be of the form 'unix:path=&lt;path_to_socket&gt;'</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">privateBus</td><td>true if refers to the private bus. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The address of the bus.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the address was validated by opening a connection to the bus, otherwise false. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ipcUtils/include/<a class="el" href="DobbyIPCUtils_8h_source.html">DobbyIPCUtils.h</a></li>
<li>ipcUtils/source/<b>DobbyIPCUtils.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
