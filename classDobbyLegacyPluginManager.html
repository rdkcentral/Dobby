<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: DobbyLegacyPluginManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Dobby<span id="projectnumber">&#160;3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classDobbyLegacyPluginManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DobbyLegacyPluginManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class that manages all the plugin hook libraries.  
 <a href="classDobbyLegacyPluginManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DobbyLegacyPluginManager_8h_source.html">DobbyLegacyPluginManager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2064bdcade60cb705f9668a57a1c6bf7" id="r_a2064bdcade60cb705f9668a57a1c6bf7"><td class="memItemLeft" align="right" valign="top"><a id="a2064bdcade60cb705f9668a57a1c6bf7" name="a2064bdcade60cb705f9668a57a1c6bf7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DobbyLegacyPluginManager</b> (const std::shared_ptr&lt; <a class="el" href="classIDobbyEnv.html">IDobbyEnv</a> &gt; &amp;env, const std::shared_ptr&lt; <a class="el" href="classIDobbyUtils__v3.html">IDobbyUtils</a> &gt; &amp;utils, const std::string &amp;path=std::string(DEFAULT_PLUGIN_PATH))</td></tr>
<tr class="separator:a2064bdcade60cb705f9668a57a1c6bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b8472ca680e2e6bd1161fb8f65241db" id="r_a7b8472ca680e2e6bd1161fb8f65241db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#a7b8472ca680e2e6bd1161fb8f65241db">refreshPlugins</a> (const std::string &amp;path=std::string(DEFAULT_PLUGIN_PATH))</td></tr>
<tr class="memdesc:a7b8472ca680e2e6bd1161fb8f65241db"><td class="mdescLeft">&#160;</td><td class="mdescRight">(re)loads all the plugin libraries found at the given path  <br /></td></tr>
<tr class="separator:a7b8472ca680e2e6bd1161fb8f65241db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a877ffe63ca6d83ea6dc196763086a" id="r_a76a877ffe63ca6d83ea6dc196763086a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#a76a877ffe63ca6d83ea6dc196763086a">executePostConstructionHooks</a> (const std::map&lt; std::string, Json::Value &gt; &amp;plugins, const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, const std::shared_ptr&lt; <a class="el" href="classIDobbyStartState.html">IDobbyStartState</a> &gt; &amp;startupState, const std::string &amp;rootfsPath) const</td></tr>
<tr class="memdesc:a76a877ffe63ca6d83ea6dc196763086a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the postConstruction method for the given plugins.  <br /></td></tr>
<tr class="separator:a76a877ffe63ca6d83ea6dc196763086a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a044692fb553882a3129191f3bc825fa5" id="r_a044692fb553882a3129191f3bc825fa5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#a044692fb553882a3129191f3bc825fa5">executePreStartHooks</a> (const std::map&lt; std::string, Json::Value &gt; &amp;plugins, const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, pid_t pid, const std::string &amp;rootfsPath) const</td></tr>
<tr class="memdesc:a044692fb553882a3129191f3bc825fa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the preStart method for the given plugins.  <br /></td></tr>
<tr class="separator:a044692fb553882a3129191f3bc825fa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9cac112378e900a814781e30c2b9a35" id="r_ab9cac112378e900a814781e30c2b9a35"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#ab9cac112378e900a814781e30c2b9a35">executePostStartHooks</a> (const std::map&lt; std::string, Json::Value &gt; &amp;plugins, const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, pid_t pid, const std::string &amp;rootfsPath) const</td></tr>
<tr class="memdesc:ab9cac112378e900a814781e30c2b9a35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the postStart method for the given plugins.  <br /></td></tr>
<tr class="separator:ab9cac112378e900a814781e30c2b9a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae935b7f61689a7a5d0e2c82505c9fcc4" id="r_ae935b7f61689a7a5d0e2c82505c9fcc4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#ae935b7f61689a7a5d0e2c82505c9fcc4">executePostStopHooks</a> (const std::map&lt; std::string, Json::Value &gt; &amp;plugins, const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, const std::string &amp;rootfsPath) const</td></tr>
<tr class="memdesc:ae935b7f61689a7a5d0e2c82505c9fcc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the postStop method for the given plugins.  <br /></td></tr>
<tr class="separator:ae935b7f61689a7a5d0e2c82505c9fcc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07c851c58614559b36a7f62a31e651c4" id="r_a07c851c58614559b36a7f62a31e651c4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#a07c851c58614559b36a7f62a31e651c4">executePreDestructionHooks</a> (const std::map&lt; std::string, Json::Value &gt; &amp;plugins, const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, const std::string &amp;rootfsPath) const</td></tr>
<tr class="memdesc:a07c851c58614559b36a7f62a31e651c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the preDestruction method for the given plugins.  <br /></td></tr>
<tr class="separator:a07c851c58614559b36a7f62a31e651c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:aa1cd76a15424270ff60b53f550562f3b" id="r_aa1cd76a15424270ff60b53f550562f3b"><td class="memItemLeft" align="right" valign="top"><a id="aa1cd76a15424270ff60b53f550562f3b" name="aa1cd76a15424270ff60b53f550562f3b"></a>
typedef std::function&lt; bool(<a class="el" href="classIDobbyPlugin.html">IDobbyPlugin</a> *, const Json::Value &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>HookFn</b></td></tr>
<tr class="separator:aa1cd76a15424270ff60b53f550562f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a0f509341dc4c62e05ecc776701c6694a" id="r_a0f509341dc4c62e05ecc776701c6694a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#a0f509341dc4c62e05ecc776701c6694a">executeHooks</a> (const std::map&lt; std::string, Json::Value &gt; &amp;plugins, const HookFn &amp;hookFn, unsigned asyncFlag, unsigned syncFlag) const</td></tr>
<tr class="memdesc:a0f509341dc4c62e05ecc776701c6694a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the supplied hook function for the plugins in the list.  <br /></td></tr>
<tr class="separator:a0f509341dc4c62e05ecc776701c6694a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1cc0242031766842956abb715bf1a40" id="r_af1cc0242031766842956abb715bf1a40"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classIDobbyPlugin.html">IDobbyPlugin</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#af1cc0242031766842956abb715bf1a40">getPlugin</a> (const std::string &amp;name) const</td></tr>
<tr class="memdesc:af1cc0242031766842956abb715bf1a40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the plugin with the name, or nullptr if no plugin.  <br /></td></tr>
<tr class="separator:af1cc0242031766842956abb715bf1a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c6acb64f36d977af629151084639cd" id="r_ad0c6acb64f36d977af629151084639cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyLegacyPluginManager.html#ad0c6acb64f36d977af629151084639cd">loadPlugins</a> (const std::string &amp;path)</td></tr>
<tr class="memdesc:ad0c6acb64f36d977af629151084639cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans the given path for any shared objects that implement the plugin entry points.  <br /></td></tr>
<tr class="separator:ad0c6acb64f36d977af629151084639cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a90c0fe857cb6c7adcb48273bc07d6d55" id="r_a90c0fe857cb6c7adcb48273bc07d6d55"><td class="memItemLeft" align="right" valign="top"><a id="a90c0fe857cb6c7adcb48273bc07d6d55" name="a90c0fe857cb6c7adcb48273bc07d6d55"></a>
pthread_rwlock_t&#160;</td><td class="memItemRight" valign="bottom"><b>mRwLock</b></td></tr>
<tr class="separator:a90c0fe857cb6c7adcb48273bc07d6d55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69afd04e071647ec18cd4bc1b87a5615" id="r_a69afd04e071647ec18cd4bc1b87a5615"><td class="memItemLeft" align="right" valign="top"><a id="a69afd04e071647ec18cd4bc1b87a5615" name="a69afd04e071647ec18cd4bc1b87a5615"></a>
const std::shared_ptr&lt; <a class="el" href="classIDobbyEnv.html">IDobbyEnv</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mEnvironment</b></td></tr>
<tr class="separator:a69afd04e071647ec18cd4bc1b87a5615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4508054610bbd02f6ef58ef4667f530e" id="r_a4508054610bbd02f6ef58ef4667f530e"><td class="memItemLeft" align="right" valign="top"><a id="a4508054610bbd02f6ef58ef4667f530e" name="a4508054610bbd02f6ef58ef4667f530e"></a>
const std::shared_ptr&lt; <a class="el" href="classIDobbyUtils__v3.html">IDobbyUtils</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mUtilities</b></td></tr>
<tr class="separator:a4508054610bbd02f6ef58ef4667f530e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b82397765bec10ff4c004fe5e93f35" id="r_ad5b82397765bec10ff4c004fe5e93f35"><td class="memItemLeft" align="right" valign="top"><a id="ad5b82397765bec10ff4c004fe5e93f35" name="ad5b82397765bec10ff4c004fe5e93f35"></a>
std::map&lt; std::string, std::pair&lt; void *, std::shared_ptr&lt; <a class="el" href="classIDobbyPlugin.html">IDobbyPlugin</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mPlugins</b></td></tr>
<tr class="separator:ad5b82397765bec10ff4c004fe5e93f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that manages all the plugin hook libraries. </p>
<p>This class doesn't manage the system hooks, they are setup in the <a class="el" href="classDobbyManager.html" title="The main object which starts / stops / manages the containers.">DobbyManager</a> class (we should probably change this ... TBD)</p>
<p>At creation time it loads all the plugin libraries from /opt/libexec. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a0f509341dc4c62e05ecc776701c6694a" name="a0f509341dc4c62e05ecc776701c6694a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f509341dc4c62e05ecc776701c6694a">&#9670;&#160;</a></span>executeHooks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyLegacyPluginManager::executeHooks </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, Json::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>plugins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const HookFn &amp;&#160;</td>
          <td class="paramname"><em>hookFn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>asyncFlag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>syncFlag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calls the supplied hook function for the plugins in the list. </p>
<p>Because the process of executing plugin hooks is the same for all hooks, we use this function to do the work, supplying it with (effectively) a function pointer of the hook we want to execute.</p>
<p>This function will iterate over the plugins and call the function pointer on each plugin object.</p>
<p>The plugins themselves provide a bit-field indicating which hooks need to be executed, and if they should be executed whether they run in a separate thread or in the calling thread. These hints are queried before executing the supplied hook function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">plugins</td><td>A map of plugin names and their data to execute </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hookFn</td><td>The hook method to call on the plugin </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">asyncFlag</td><td>The bit flag that if the plugin has set indicates the hook method should be called asynchronously </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">syncFlag</td><td>The bit flag that if the plugin has set indicates the hook method should be called synchronously</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all plugins executed the hook method without failure, otherwise false. </dd></dl>

</div>
</div>
<a id="a76a877ffe63ca6d83ea6dc196763086a" name="a76a877ffe63ca6d83ea6dc196763086a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76a877ffe63ca6d83ea6dc196763086a">&#9670;&#160;</a></span>executePostConstructionHooks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyLegacyPluginManager::executePostConstructionHooks </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, Json::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>plugins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classContainerId.html">ContainerId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classIDobbyStartState.html">IDobbyStartState</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>startupState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the postConstruction method for the given plugins. </p>
<p>The function iterates over the list of plugins and their data and calls the plugin's postConstruction method. Each plugin provides hints as to whether the hook method should be executed at all or synchronously or asynchronously.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">plugins</td><td>A map of plugin names and their data to execute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startupState</td><td>The start-up state of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rootfsPath</td><td>The path of the rootfs of the container.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all plugins executed the hook method without failure, otherwise false. </dd></dl>

</div>
</div>
<a id="ab9cac112378e900a814781e30c2b9a35" name="ab9cac112378e900a814781e30c2b9a35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9cac112378e900a814781e30c2b9a35">&#9670;&#160;</a></span>executePostStartHooks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyLegacyPluginManager::executePostStartHooks </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, Json::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>plugins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classContainerId.html">ContainerId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the postStart method for the given plugins. </p>
<p>The function iterates over the list of plugins and their data and calls the plugin's postStart method. Each plugin provides hints as to whether the hook method should be executed; at all or synchronously or asynchronously.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">plugins</td><td>A map of plugin names and their data to execute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pid</td><td>The pid of the init process inside the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rootfsPath</td><td>The path of the rootfs of the container.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all plugins executed the hook method without failure, otherwise false. </dd></dl>

</div>
</div>
<a id="ae935b7f61689a7a5d0e2c82505c9fcc4" name="ae935b7f61689a7a5d0e2c82505c9fcc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae935b7f61689a7a5d0e2c82505c9fcc4">&#9670;&#160;</a></span>executePostStopHooks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyLegacyPluginManager::executePostStopHooks </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, Json::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>plugins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classContainerId.html">ContainerId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the postStop method for the given plugins. </p>
<p>The function iterates over the list of plugins and their data and calls the plugin's postStop method. Each plugin provides hints as to whether the hook method should be executed; at all or synchronously or asynchronously.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">plugins</td><td>A map of plugin names and their data to execute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rootfsPath</td><td>The path of the rootfs of the container.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all plugins executed the hook method without failure, otherwise false. </dd></dl>

</div>
</div>
<a id="a07c851c58614559b36a7f62a31e651c4" name="a07c851c58614559b36a7f62a31e651c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07c851c58614559b36a7f62a31e651c4">&#9670;&#160;</a></span>executePreDestructionHooks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyLegacyPluginManager::executePreDestructionHooks </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, Json::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>plugins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classContainerId.html">ContainerId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the preDestruction method for the given plugins. </p>
<p>The function iterates over the list of plugins and their data and calls the plugin's preDestruction method. Each plugin provides hints as to whether the hook method should be executed; at all or synchronously or asynchronously.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">plugins</td><td>A map of plugin names and their data to execute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rootfsPath</td><td>The path of the rootfs of the container.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all plugins executed the hook method without failure, otherwise false. </dd></dl>

</div>
</div>
<a id="a044692fb553882a3129191f3bc825fa5" name="a044692fb553882a3129191f3bc825fa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a044692fb553882a3129191f3bc825fa5">&#9670;&#160;</a></span>executePreStartHooks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyLegacyPluginManager::executePreStartHooks </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, Json::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>plugins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classContainerId.html">ContainerId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the preStart method for the given plugins. </p>
<p>The function iterates over the list of plugins and their data and calls the plugin's preStart method. Each plugin provides hints as to whether the hook method should be executed; at all or synchronously or asynchronously.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">plugins</td><td>A map of plugin names and their data to execute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pid</td><td>The pid of the init process inside the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rootfsPath</td><td>The path of the rootfs of the container.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all plugins executed the hook method without failure, otherwise false. </dd></dl>

</div>
</div>
<a id="af1cc0242031766842956abb715bf1a40" name="af1cc0242031766842956abb715bf1a40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1cc0242031766842956abb715bf1a40">&#9670;&#160;</a></span>getPlugin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classIDobbyPlugin.html">IDobbyPlugin</a> &gt; DobbyLegacyPluginManager::getPlugin </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the plugin with the name, or nullptr if no plugin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name of the plugin.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The plugin interface shared pointer. </dd></dl>

</div>
</div>
<a id="ad0c6acb64f36d977af629151084639cd" name="ad0c6acb64f36d977af629151084639cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0c6acb64f36d977af629151084639cd">&#9670;&#160;</a></span>loadPlugins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DobbyLegacyPluginManager::loadPlugins </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scans the given path for any shared objects that implement the plugin entry points. </p>
<p>This calls dlopen() on all the executable files in the given path (although it doesn't recurse into subdirs), if the file has symbols createIDobbyPlugin and destroyIDobbyPlugin then it's deemed to be a 'dobby' plugin.</p>
<p>If loaded successfully the plugins are stored in an internal map, keyed off the plugin name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>The path to scan for hook libraries. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b8472ca680e2e6bd1161fb8f65241db" name="a7b8472ca680e2e6bd1161fb8f65241db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b8472ca680e2e6bd1161fb8f65241db">&#9670;&#160;</a></span>refreshPlugins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DobbyLegacyPluginManager::refreshPlugins </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em> = <code>std::string(DEFAULT_PLUGIN_PATH)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(re)loads all the plugin libraries found at the given path </p>
<p>Intended for debugging / developing plugins as it allows for reloading libraries.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>The path to scan for plugins libraries. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>daemon/lib/source/include/<a class="el" href="DobbyLegacyPluginManager_8h_source.html">DobbyLegacyPluginManager.h</a></li>
<li>daemon/lib/source/<b>DobbyLegacyPluginManager.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
