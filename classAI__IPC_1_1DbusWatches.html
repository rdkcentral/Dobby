<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: AI_IPC::DbusWatches Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dobby
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>AI_IPC</b></li><li class="navelem"><a class="el" href="classAI__IPC_1_1DbusWatches.html">DbusWatches</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classAI__IPC_1_1DbusWatches-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AI_IPC::DbusWatches Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Utility object to handle installing / removing dbus watches from the poll loop.  
 <a href="classAI__IPC_1_1DbusWatches.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DbusWatches_8h_source.html">DbusWatches.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for AI_IPC::DbusWatches:</div>
<div class="dyncontent">
<div class="center"><img src="classAI__IPC_1_1DbusWatches__coll__graph.png" border="0" usemap="#aAI__IPC_1_1DbusWatches_coll__map" alt="Collaboration graph"/></div>
<map name="aAI__IPC_1_1DbusWatches_coll__map" id="aAI__IPC_1_1DbusWatches_coll__map">
<area shape="rect" title="Utility object to handle installing / removing dbus watches from the poll loop." alt="" coords="5,5,164,32"/>
<area shape="rect" href="structAI__IPC_1_1DbusWatches_1_1__WatchEntry.html" title=" " alt="" coords="5,95,164,136"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAI__IPC_1_1DbusWatches_1_1__WatchEntry.html">_WatchEntry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab099478ef23bbdfba1b1b5dcf27623de"><td class="memItemLeft" align="right" valign="top"><a id="ab099478ef23bbdfba1b1b5dcf27623de"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DbusWatches</b> (DBusConnection *conn)</td></tr>
<tr class="separator:ab099478ef23bbdfba1b1b5dcf27623de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4f75d6911647887a70c5f4f8d36bb2b"><td class="memItemLeft" align="right" valign="top"><a id="ad4f75d6911647887a70c5f4f8d36bb2b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusWatches.html#ad4f75d6911647887a70c5f4f8d36bb2b">fd</a> () const</td></tr>
<tr class="memdesc:ad4f75d6911647887a70c5f4f8d36bb2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the epoll fd that the dispatcher should poll on. <br /></td></tr>
<tr class="separator:ad4f75d6911647887a70c5f4f8d36bb2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb89656678e40b59dc968841d397053"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusWatches.html#a0bb89656678e40b59dc968841d397053">processEvent</a> (unsigned int pollEvents)</td></tr>
<tr class="memdesc:a0bb89656678e40b59dc968841d397053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when something has happened on the epoll event loop.  <a href="classAI__IPC_1_1DbusWatches.html#a0bb89656678e40b59dc968841d397053">More...</a><br /></td></tr>
<tr class="separator:a0bb89656678e40b59dc968841d397053"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a400d7a954558bcb25b7b2cbd6d46e77f"><td class="memItemLeft" align="right" valign="top"><a id="a400d7a954558bcb25b7b2cbd6d46e77f"></a>
typedef struct <a class="el" href="structAI__IPC_1_1DbusWatches_1_1__WatchEntry.html">AI_IPC::DbusWatches::_WatchEntry</a>&#160;</td><td class="memItemRight" valign="bottom"><b>WatchEntry</b></td></tr>
<tr class="separator:a400d7a954558bcb25b7b2cbd6d46e77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a45e0d776611014797000c280f2cb38ce"><td class="memItemLeft" align="right" valign="top">dbus_bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusWatches.html#a45e0d776611014797000c280f2cb38ce">addWatch</a> (DBusWatch *watch)</td></tr>
<tr class="memdesc:a45e0d776611014797000c280f2cb38ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback from dbus to add a new watch to poll on.  <a href="classAI__IPC_1_1DbusWatches.html#a45e0d776611014797000c280f2cb38ce">More...</a><br /></td></tr>
<tr class="separator:a45e0d776611014797000c280f2cb38ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05cae5ba4c25f7a5797c89e1b0bdcd6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusWatches.html#a05cae5ba4c25f7a5797c89e1b0bdcd6f">toggleWatch</a> (DBusWatch *watch)</td></tr>
<tr class="memdesc:a05cae5ba4c25f7a5797c89e1b0bdcd6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggles the watch flags on the given watch.  <a href="classAI__IPC_1_1DbusWatches.html#a05cae5ba4c25f7a5797c89e1b0bdcd6f">More...</a><br /></td></tr>
<tr class="separator:a05cae5ba4c25f7a5797c89e1b0bdcd6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61c35733dc42fea285eae359b832666e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusWatches.html#a61c35733dc42fea285eae359b832666e">removeWatch</a> (DBusWatch *watch)</td></tr>
<tr class="memdesc:a61c35733dc42fea285eae359b832666e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the watch from the epoll loop and our local array.  <a href="classAI__IPC_1_1DbusWatches.html#a61c35733dc42fea285eae359b832666e">More...</a><br /></td></tr>
<tr class="separator:a61c35733dc42fea285eae359b832666e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa52bf030c7dda5d522e78315bcae5e91"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusWatches.html#aa52bf030c7dda5d522e78315bcae5e91">createWatch</a> (DBusWatch *watch, int duppedFd)</td></tr>
<tr class="memdesc:aa52bf030c7dda5d522e78315bcae5e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to find a slot to put the watch into.  <a href="classAI__IPC_1_1DbusWatches.html#aa52bf030c7dda5d522e78315bcae5e91">More...</a><br /></td></tr>
<tr class="separator:aa52bf030c7dda5d522e78315bcae5e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad12ecd6ef21447f7721ee5113d285382"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusWatches.html#ad12ecd6ef21447f7721ee5113d285382">deleteWatch</a> (uint64_t tag)</td></tr>
<tr class="memdesc:ad12ecd6ef21447f7721ee5113d285382"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a watch from our internal array.  <a href="classAI__IPC_1_1DbusWatches.html#ad12ecd6ef21447f7721ee5113d285382">More...</a><br /></td></tr>
<tr class="separator:ad12ecd6ef21447f7721ee5113d285382"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:afebce8516bd7f410552f6e4c561b9c1c"><td class="memItemLeft" align="right" valign="top"><a id="afebce8516bd7f410552f6e4c561b9c1c"></a>
static dbus_bool_t&#160;</td><td class="memItemRight" valign="bottom"><b>addWatchCb</b> (DBusWatch *watch, void *userData)</td></tr>
<tr class="separator:afebce8516bd7f410552f6e4c561b9c1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6b9dc22c4431f79b01cc360295b81b"><td class="memItemLeft" align="right" valign="top"><a id="aba6b9dc22c4431f79b01cc360295b81b"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>toggleWatchCb</b> (DBusWatch *watch, void *userData)</td></tr>
<tr class="separator:aba6b9dc22c4431f79b01cc360295b81b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c56cff48afaa1b4cedc55350af45e0"><td class="memItemLeft" align="right" valign="top"><a id="a05c56cff48afaa1b4cedc55350af45e0"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>removeWatchCb</b> (DBusWatch *watch, void *userData)</td></tr>
<tr class="separator:a05c56cff48afaa1b4cedc55350af45e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a698e88b1a2917e500a352884fff47f06"><td class="memItemLeft" align="right" valign="top"><a id="a698e88b1a2917e500a352884fff47f06"></a>
DBusConnection *const&#160;</td><td class="memItemRight" valign="bottom"><b>mDbusConnection</b></td></tr>
<tr class="separator:a698e88b1a2917e500a352884fff47f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358c12d7cc10e2e00012150814138a8f"><td class="memItemLeft" align="right" valign="top"><a id="a358c12d7cc10e2e00012150814138a8f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mEpollFd</b></td></tr>
<tr class="separator:a358c12d7cc10e2e00012150814138a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8156b02763f8851ead760e11e107466c"><td class="memItemLeft" align="right" valign="top"><a id="a8156b02763f8851ead760e11e107466c"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>mTagCounter</b></td></tr>
<tr class="separator:a8156b02763f8851ead760e11e107466c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c661e815636a0bbac4c4463eb62b00"><td class="memItemLeft" align="right" valign="top"><a id="ab9c661e815636a0bbac4c4463eb62b00"></a>
<a class="el" href="structAI__IPC_1_1DbusWatches_1_1__WatchEntry.html">WatchEntry</a>&#160;</td><td class="memItemRight" valign="bottom"><b>mWatches</b> [mMaxWatches]</td></tr>
<tr class="separator:ab9c661e815636a0bbac4c4463eb62b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a644c7d0e0266e4bad9c356b5b5611ea5"><td class="memItemLeft" align="right" valign="top"><a id="a644c7d0e0266e4bad9c356b5b5611ea5"></a>
struct epoll_event&#160;</td><td class="memItemRight" valign="bottom"><b>mEpollEvents</b> [mMaxWatches]</td></tr>
<tr class="separator:a644c7d0e0266e4bad9c356b5b5611ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b5b8392f503d8e4179d451f3af31186"><td class="memItemLeft" align="right" valign="top"><a id="a4b5b8392f503d8e4179d451f3af31186"></a>
const std::thread::id&#160;</td><td class="memItemRight" valign="bottom"><b>mExpectedThreadId</b></td></tr>
<tr class="separator:a4b5b8392f503d8e4179d451f3af31186"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a0f50141e0a729f8370f20d623a894f15"><td class="memItemLeft" align="right" valign="top"><a id="a0f50141e0a729f8370f20d623a894f15"></a>
static const unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>mMaxWatches</b> = 128</td></tr>
<tr class="separator:a0f50141e0a729f8370f20d623a894f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility object to handle installing / removing dbus watches from the poll loop. </p>
<dl class="section warning"><dt>Warning</dt><dd>This class is not thread safe, it is designed to only be called from one thread which is the same thread the libdbus callbacks will be called from. On debug builds an error will be reported if called from an invalid thread.</dd></dl>
<p>Internally it creates an epoll object that has watches (which are just fds) added to / removed from it. The epoll fd is returned by this object, and the dispatch poll loop will poll on this. So in effect this is a second level of poll file descriptors.</p>
<p>This code automatically installs the dbus callbacks on the connection at construction time, and removes the callbacks at destruction.</p>
<p>When watches are added we dup the file descriptors, and add the dupped fd to epoll. The reason for this is that libdbus tends to have more than one watch associated with a single fd and you can't add the same fd more once to an epoll event loop. By dup'ing the file descriptors it means we can have one epoll event entry per dbus watch. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a45e0d776611014797000c280f2cb38ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45e0d776611014797000c280f2cb38ce">&#9670;&nbsp;</a></span>addWatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dbus_bool_t DbusWatches::addWatch </td>
          <td>(</td>
          <td class="paramtype">DBusWatch *&#160;</td>
          <td class="paramname"><em>watch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback from dbus to add a new watch to poll on. </p>
<p>libdus should call this function from the dispatch loop thread. We are responsible for adding the watch file descriptor to the poll loop with the given watch flags. When we're woken by one of these we then need to call the watch's dispatch function (called in <a class="el" href="classAI__IPC_1_1DbusWatches.html#a0bb89656678e40b59dc968841d397053" title="Called when something has happened on the epoll event loop.">processEvent()</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">watch</td><td>The dbus watch object to add</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success and FALSE on failure. </dd></dl>

</div>
</div>
<a id="aa52bf030c7dda5d522e78315bcae5e91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa52bf030c7dda5d522e78315bcae5e91">&#9670;&nbsp;</a></span>createWatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t DbusWatches::createWatch </td>
          <td>(</td>
          <td class="paramtype">DBusWatch *&#160;</td>
          <td class="paramname"><em>watch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>duppedFd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to find a slot to put the watch into. </p>
<p>We store the watches in an internal array, each watch has a unique 64-bit tag number, this tag is added to the epoll event so we can quickly find the watch that triggered the event.</p>
<p>The lower bits of the tag number are the index into the internal array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">watch</td><td>The dbus watch object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">duppedFd</td><td>The dup'ed file descriptor for the watch</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>on success a non-zero tag number, on failure 0. </dd></dl>

</div>
</div>
<a id="ad12ecd6ef21447f7721ee5113d285382"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad12ecd6ef21447f7721ee5113d285382">&#9670;&nbsp;</a></span>deleteWatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DbusWatches::deleteWatch </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>tag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes a watch from our internal array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>The tag number of the watch to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0bb89656678e40b59dc968841d397053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb89656678e40b59dc968841d397053">&#9670;&nbsp;</a></span>processEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DbusWatches::processEvent </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pollEvents</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when something has happened on the epoll event loop. </p>
<p>The main disaptcher loop polls on the fd we supply, when anything changes then this method is called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pollEvents</td><td>Bitmask of the poll events that woke the main loop. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61c35733dc42fea285eae359b832666e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61c35733dc42fea285eae359b832666e">&#9670;&nbsp;</a></span>removeWatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DbusWatches::removeWatch </td>
          <td>(</td>
          <td class="paramtype">DBusWatch *&#160;</td>
          <td class="paramname"><em>watch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes the watch from the epoll loop and our local array. </p>
<p>libdus should call this function from the dispatch loop thread. We check whether the watch has been added, and if so we remove it from epoll.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">watch</td><td>The dbus watch object to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a05cae5ba4c25f7a5797c89e1b0bdcd6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05cae5ba4c25f7a5797c89e1b0bdcd6f">&#9670;&nbsp;</a></span>toggleWatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DbusWatches::toggleWatch </td>
          <td>(</td>
          <td class="paramtype">DBusWatch *&#160;</td>
          <td class="paramname"><em>watch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Toggles the watch flags on the given watch. </p>
<p>libdus should call this function from the dispatch loop thread. This just changes the epoll event flags to match the new dbus watch flags for the given watch.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">watch</td><td>The dbus watch object to add </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>AppInfrastructure/IpcService/source/libdbus/<a class="el" href="DbusWatches_8h_source.html">DbusWatches.h</a></li>
<li>AppInfrastructure/IpcService/source/libdbus/DbusWatches.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
