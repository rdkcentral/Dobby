<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: Storage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dobby
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classStorage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Storage Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classDobby.html" title="The root Dobby object, runs the dbus loop.">Dobby</a> RDK <a class="el" href="classStorage.html" title="Dobby RDK Storage Plugin.">Storage</a> Plugin.  
 <a href="classStorage.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Storage_8h_source.html">Storage.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Storage:</div>
<div class="dyncontent">
<div class="center"><img src="classStorage__inherit__graph.png" border="0" usemap="#aStorage_inherit__map" alt="Inheritance graph"/></div>
<map name="aStorage_inherit__map" id="aStorage_inherit__map">
<area shape="rect" title="Dobby RDK Storage Plugin." alt="" coords="36,155,108,181"/>
<area shape="rect" href="classRdkPluginBase.html" title="Basic object that provides the default overrides for a plugin." alt="" coords="13,80,131,107"/>
<area shape="rect" href="classIDobbyRdkPlugin.html" title="Interface that plugin libraries have to implement." alt="" coords="5,5,139,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Storage:</div>
<div class="dyncontent">
<div class="center"><img src="classStorage__coll__graph.png" border="0" usemap="#aStorage_coll__map" alt="Collaboration graph"/></div>
<map name="aStorage_coll__map" id="aStorage_coll__map">
<area shape="rect" title="Dobby RDK Storage Plugin." alt="" coords="36,155,108,181"/>
<area shape="rect" href="classRdkPluginBase.html" title="Basic object that provides the default overrides for a plugin." alt="" coords="13,80,131,107"/>
<area shape="rect" href="classIDobbyRdkPlugin.html" title="Interface that plugin libraries have to implement." alt="" coords="5,5,139,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7504e8376164015c414861ffcd1816cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a7504e8376164015c414861ffcd1816cf">Storage</a> (std::shared_ptr&lt; rt_dobby_schema &gt; &amp;containerConfig, const std::shared_ptr&lt; <a class="el" href="classDobbyRdkPluginUtils.html">DobbyRdkPluginUtils</a> &gt; &amp;utils, const std::string &amp;rootfsPath)</td></tr>
<tr class="memdesc:a7504e8376164015c414861ffcd1816cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor - called when plugin is loaded by PluginLauncher.  <a href="classStorage.html#a7504e8376164015c414861ffcd1816cf">More...</a><br /></td></tr>
<tr class="separator:a7504e8376164015c414861ffcd1816cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1223e90fc2e58dcef9b6a7782d5fb72b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a1223e90fc2e58dcef9b6a7782d5fb72b">name</a> () const override</td></tr>
<tr class="memdesc:a1223e90fc2e58dcef9b6a7782d5fb72b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return the name of the plugin.  <a href="classStorage.html#a1223e90fc2e58dcef9b6a7782d5fb72b">More...</a><br /></td></tr>
<tr class="separator:a1223e90fc2e58dcef9b6a7782d5fb72b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a282998f873e3dfdbc2861262a9faa5f1"><td class="memItemLeft" align="right" valign="top"><a id="a282998f873e3dfdbc2861262a9faa5f1"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a282998f873e3dfdbc2861262a9faa5f1">hookHints</a> () const override</td></tr>
<tr class="memdesc:a282998f873e3dfdbc2861262a9faa5f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the bit flags for which hooks we're going to use. <br /></td></tr>
<tr class="separator:a282998f873e3dfdbc2861262a9faa5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a3fac5ce3fb766173ce31fb96317d01"><td class="memItemLeft" align="right" valign="top"><a id="a7a3fac5ce3fb766173ce31fb96317d01"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a7a3fac5ce3fb766173ce31fb96317d01">preCreation</a> () override</td></tr>
<tr class="memdesc:a7a3fac5ce3fb766173ce31fb96317d01"><td class="mdescLeft">&#160;</td><td class="mdescRight">OCI Hook - Run in host namespace. <br /></td></tr>
<tr class="separator:a7a3fac5ce3fb766173ce31fb96317d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef2df60bad911ca680d49d9c0d8dd15"><td class="memItemLeft" align="right" valign="top"><a id="aaef2df60bad911ca680d49d9c0d8dd15"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#aaef2df60bad911ca680d49d9c0d8dd15">createRuntime</a> () override</td></tr>
<tr class="memdesc:aaef2df60bad911ca680d49d9c0d8dd15"><td class="mdescLeft">&#160;</td><td class="mdescRight">OCI Hook - Run in host namespace. <br /></td></tr>
<tr class="separator:aaef2df60bad911ca680d49d9c0d8dd15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f26667ffc56a7a31bd770b6a3a3f002"><td class="memItemLeft" align="right" valign="top"><a id="a2f26667ffc56a7a31bd770b6a3a3f002"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a2f26667ffc56a7a31bd770b6a3a3f002">createContainer</a> () override</td></tr>
<tr class="memdesc:a2f26667ffc56a7a31bd770b6a3a3f002"><td class="mdescLeft">&#160;</td><td class="mdescRight">OCI Hook - Run in container namespace. Paths resolve to host namespace. <br /></td></tr>
<tr class="separator:a2f26667ffc56a7a31bd770b6a3a3f002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ded5d67acaa99fd83b4d03b509191dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a2ded5d67acaa99fd83b4d03b509191dc">postStart</a> () override</td></tr>
<tr class="memdesc:a2ded5d67acaa99fd83b4d03b509191dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">OCI Hook - Run in container namespace.  <a href="classStorage.html#a2ded5d67acaa99fd83b4d03b509191dc">More...</a><br /></td></tr>
<tr class="separator:a2ded5d67acaa99fd83b4d03b509191dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0146ddc4690b86a74c074e3586d465ce"><td class="memItemLeft" align="right" valign="top"><a id="a0146ddc4690b86a74c074e3586d465ce"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a0146ddc4690b86a74c074e3586d465ce">postStop</a> () override</td></tr>
<tr class="memdesc:a0146ddc4690b86a74c074e3586d465ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">OCI Hook - Run in host namespace. Confusing name - is run when a container is DELETED. <br /></td></tr>
<tr class="separator:a0146ddc4690b86a74c074e3586d465ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa33a351063ee71ca6576b23e3cc82bf9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#aa33a351063ee71ca6576b23e3cc82bf9">getDependencies</a> () const override</td></tr>
<tr class="memdesc:aa33a351063ee71ca6576b23e3cc82bf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return the names of the plugins this plugin depends on.  <a href="classStorage.html#aa33a351063ee71ca6576b23e3cc82bf9">More...</a><br /></td></tr>
<tr class="separator:aa33a351063ee71ca6576b23e3cc82bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classRdkPluginBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classRdkPluginBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classRdkPluginBase.html">RdkPluginBase</a></td></tr>
<tr class="memitem:afb8522eece4b1948ea815d12a1fdd08b inherit pub_methods_classRdkPluginBase"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRdkPluginBase.html#afb8522eece4b1948ea815d12a1fdd08b">postInstallation</a> ()</td></tr>
<tr class="separator:afb8522eece4b1948ea815d12a1fdd08b inherit pub_methods_classRdkPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a690f2542922c5c88a9ff4654732fea99 inherit pub_methods_classRdkPluginBase"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRdkPluginBase.html#a690f2542922c5c88a9ff4654732fea99">postHalt</a> ()</td></tr>
<tr class="separator:a690f2542922c5c88a9ff4654732fea99 inherit pub_methods_classRdkPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a99fecb3201b1dd1abfa96005f14f8ec3"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct__LoopMountProperties.html">LoopMountProperties</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a99fecb3201b1dd1abfa96005f14f8ec3">getLoopMounts</a> () const</td></tr>
<tr class="memdesc:a99fecb3201b1dd1abfa96005f14f8ec3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads container config and creates all loop mounts in LoopMountProperties type objects.  <a href="classStorage.html#a99fecb3201b1dd1abfa96005f14f8ec3">More...</a><br /></td></tr>
<tr class="separator:a99fecb3201b1dd1abfa96005f14f8ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aa58851e5632d2d6a9b9e50280f1e34"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classLoopMountDetails.html">LoopMountDetails</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a2aa58851e5632d2d6a9b9e50280f1e34">getLoopMountDetails</a> () const</td></tr>
<tr class="memdesc:a2aa58851e5632d2d6a9b9e50280f1e34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create loop mount details vector from all loopback mounts in config.  <a href="classStorage.html#a2aa58851e5632d2d6a9b9e50280f1e34">More...</a><br /></td></tr>
<tr class="separator:a2aa58851e5632d2d6a9b9e50280f1e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4cea1f09e2516d22858ecd4f0633091"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct__DynamicMountProperties.html">DynamicMountProperties</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#ae4cea1f09e2516d22858ecd4f0633091">getDynamicMounts</a> () const</td></tr>
<tr class="memdesc:ae4cea1f09e2516d22858ecd4f0633091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads container config and creates all dynamic mounts in DynamicMountProperties type objects.  <a href="classStorage.html#ae4cea1f09e2516d22858ecd4f0633091">More...</a><br /></td></tr>
<tr class="separator:ae4cea1f09e2516d22858ecd4f0633091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0619cbc64a66eded8f2124f7daf5129"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classDynamicMountDetails.html">DynamicMountDetails</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#ab0619cbc64a66eded8f2124f7daf5129">getDynamicMountDetails</a> () const</td></tr>
<tr class="memdesc:ab0619cbc64a66eded8f2124f7daf5129"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create dynamic mount details vector from all dynamic mounts in config.  <a href="classStorage.html#ab0619cbc64a66eded8f2124f7daf5129">More...</a><br /></td></tr>
<tr class="separator:ab0619cbc64a66eded8f2124f7daf5129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac60a6965e27d0867eb6583c311b891"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct__MountOwnerProperties.html">MountOwnerProperties</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a6ac60a6965e27d0867eb6583c311b891">getMountOwners</a> () const</td></tr>
<tr class="memdesc:a6ac60a6965e27d0867eb6583c311b891"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads container config to obtain source path on host, userId, groupId and recursive options. These will be used later to change ownership of the source path based on userId and groupId within the host namespace.  <a href="classStorage.html#a6ac60a6965e27d0867eb6583c311b891">More...</a><br /></td></tr>
<tr class="separator:a6ac60a6965e27d0867eb6583c311b891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce85be9193c3d63b13f9a4fb2fb0ade"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classMountOwnerDetails.html">MountOwnerDetails</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#abce85be9193c3d63b13f9a4fb2fb0ade">getMountOwnerDetails</a> () const</td></tr>
<tr class="memdesc:abce85be9193c3d63b13f9a4fb2fb0ade"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create mount owner details vector from all mount owners in config.  <a href="classStorage.html#abce85be9193c3d63b13f9a4fb2fb0ade">More...</a><br /></td></tr>
<tr class="separator:abce85be9193c3d63b13f9a4fb2fb0ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c52a77716e4c4e1a8f344987c353dc7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#a5c52a77716e4c4e1a8f344987c353dc7">setupOwnerIds</a> (uid_t &amp;uid, gid_t &amp;gid) const</td></tr>
<tr class="memdesc:a5c52a77716e4c4e1a8f344987c353dc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets userId and groupId.  <a href="classStorage.html#a5c52a77716e4c4e1a8f344987c353dc7">More...</a><br /></td></tr>
<tr class="separator:a5c52a77716e4c4e1a8f344987c353dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7c28d80792ed77c212974aa84b1f2ab"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStorage.html#ab7c28d80792ed77c212974aa84b1f2ab">getMappedId</a> (uint32_t id, rt_defs_id_mapping **mapping, size_t mapping_len) const</td></tr>
<tr class="memdesc:ab7c28d80792ed77c212974aa84b1f2ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets userId or groupId based on mappings.  <a href="classStorage.html#ab7c28d80792ed77c212974aa84b1f2ab">More...</a><br /></td></tr>
<tr class="separator:ab7c28d80792ed77c212974aa84b1f2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:accc8d449b824c7d9de0d2191a283bc83"><td class="memItemLeft" align="right" valign="top"><a id="accc8d449b824c7d9de0d2191a283bc83"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mName</b></td></tr>
<tr class="separator:accc8d449b824c7d9de0d2191a283bc83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a956aa57f98739a99af8c1aa6542780bc"><td class="memItemLeft" align="right" valign="top"><a id="a956aa57f98739a99af8c1aa6542780bc"></a>
std::shared_ptr&lt; rt_dobby_schema &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mContainerConfig</b></td></tr>
<tr class="separator:a956aa57f98739a99af8c1aa6542780bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f078b1dda70af7901b0876f6221215a"><td class="memItemLeft" align="right" valign="top"><a id="a0f078b1dda70af7901b0876f6221215a"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mRootfsPath</b></td></tr>
<tr class="separator:a0f078b1dda70af7901b0876f6221215a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6766c80a54aef681fab9a9f45f9a4c"><td class="memItemLeft" align="right" valign="top"><a id="aed6766c80a54aef681fab9a9f45f9a4c"></a>
const std::shared_ptr&lt; <a class="el" href="classDobbyRdkPluginUtils.html">DobbyRdkPluginUtils</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mUtils</b></td></tr>
<tr class="separator:aed6766c80a54aef681fab9a9f45f9a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99834fff7aef47d17d6d4e70eaa82fc4"><td class="memItemLeft" align="right" valign="top"><a id="a99834fff7aef47d17d6d4e70eaa82fc4"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mMountPointInsideContainer</b></td></tr>
<tr class="separator:a99834fff7aef47d17d6d4e70eaa82fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3603942d50885453280144a30f7f1aef"><td class="memItemLeft" align="right" valign="top"><a id="a3603942d50885453280144a30f7f1aef"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mTempMountPointOutsideContainer</b></td></tr>
<tr class="separator:a3603942d50885453280144a30f7f1aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classIDobbyRdkPlugin"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classIDobbyRdkPlugin')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classIDobbyRdkPlugin.html">IDobbyRdkPlugin</a></td></tr>
<tr class="memitem:a2d3635518c5ee88a5d3fb8c9acdc0e8f inherit pub_types_classIDobbyRdkPlugin"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">HintFlags</a> : unsigned { <br />
&#160;&#160;<b>PostInstallationFlag</b> = (1 &lt;&lt; 0)
, <b>PreCreationFlag</b> = (1 &lt;&lt; 1)
, <b>CreateRuntimeFlag</b> = (1 &lt;&lt; 2)
, <b>CreateContainerFlag</b> = (1 &lt;&lt; 3)
, <br />
&#160;&#160;<b>PostStartFlag</b> = (1 &lt;&lt; 5)
, <b>PostHaltFlag</b> = (1 &lt;&lt; 6)
, <b>PostStopFlag</b> = (1 &lt;&lt; 7)
, <b>Unknown</b> = 0
<br />
 }</td></tr>
<tr class="memdesc:a2d3635518c5ee88a5d3fb8c9acdc0e8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit flags that should be returned by hookHints.  <a href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">More...</a><br /></td></tr>
<tr class="separator:a2d3635518c5ee88a5d3fb8c9acdc0e8f inherit pub_types_classIDobbyRdkPlugin"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classDobby.html" title="The root Dobby object, runs the dbus loop.">Dobby</a> RDK <a class="el" href="classStorage.html" title="Dobby RDK Storage Plugin.">Storage</a> Plugin. </p>
<p>Manages loop mount devices for containers </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7504e8376164015c414861ffcd1816cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7504e8376164015c414861ffcd1816cf">&#9670;&nbsp;</a></span>Storage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Storage::Storage </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; rt_dobby_schema &gt; &amp;&#160;</td>
          <td class="paramname"><em>containerSpec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classDobbyRdkPluginUtils.html">DobbyRdkPluginUtils</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>utils</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor - called when plugin is loaded by PluginLauncher. </p>
<p>Do not change the parameters for this constructor - must match C methods created by REGISTER_RDK_PLUGIN macro</p>
<p>Note plugin name is not case sensitive </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa33a351063ee71ca6576b23e3cc82bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa33a351063ee71ca6576b23e3cc82bf9">&#9670;&nbsp;</a></span>getDependencies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; Storage::getDependencies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should return the names of the plugins this plugin depends on. </p>
<p>This can be used to determine the order in which the plugins should be processed when running hooks.</p>
<dl class="section return"><dt>Returns</dt><dd>Names of the plugins this plugin depends on. </dd></dl>

<p>Reimplemented from <a class="el" href="classRdkPluginBase.html#a64a84c7c36adb8873c4da766f4ec18a1">RdkPluginBase</a>.</p>

</div>
</div>
<a id="ab0619cbc64a66eded8f2124f7daf5129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0619cbc64a66eded8f2124f7daf5129">&#9670;&nbsp;</a></span>getDynamicMountDetails()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classDynamicMountDetails.html">DynamicMountDetails</a> &gt; &gt; Storage::getDynamicMountDetails </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create dynamic mount details vector from all dynamic mounts in config. </p>
<dl class="section return"><dt>Returns</dt><dd>vector of <a class="el" href="classDynamicMountDetails.html" title="Class that represents a single mount within a container when the source exists on the host.">DynamicMountDetails</a> that were in the config </dd></dl>

</div>
</div>
<a id="ae4cea1f09e2516d22858ecd4f0633091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4cea1f09e2516d22858ecd4f0633091">&#9670;&nbsp;</a></span>getDynamicMounts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct__DynamicMountProperties.html">DynamicMountProperties</a> &gt; Storage::getDynamicMounts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads container config and creates all dynamic mounts in DynamicMountProperties type objects. </p>
<dl class="section return"><dt>Returns</dt><dd>vector of DynamicMountProperties that were in the config </dd></dl>

</div>
</div>
<a id="a2aa58851e5632d2d6a9b9e50280f1e34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aa58851e5632d2d6a9b9e50280f1e34">&#9670;&nbsp;</a></span>getLoopMountDetails()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classLoopMountDetails.html">LoopMountDetails</a> &gt; &gt; Storage::getLoopMountDetails </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create loop mount details vector from all loopback mounts in config. </p>
<dl class="section return"><dt>Returns</dt><dd>vector of <a class="el" href="classLoopMountDetails.html" title="Class that represents a single loop mount within a container.">LoopMountDetails</a> that were in the config </dd></dl>

</div>
</div>
<a id="a99fecb3201b1dd1abfa96005f14f8ec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99fecb3201b1dd1abfa96005f14f8ec3">&#9670;&nbsp;</a></span>getLoopMounts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct__LoopMountProperties.html">LoopMountProperties</a> &gt; Storage::getLoopMounts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads container config and creates all loop mounts in LoopMountProperties type objects. </p>
<dl class="section return"><dt>Returns</dt><dd>vector of LoopMountProperties that were in the config </dd></dl>

</div>
</div>
<a id="ab7c28d80792ed77c212974aa84b1f2ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7c28d80792ed77c212974aa84b1f2ab">&#9670;&nbsp;</a></span>getMappedId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Storage::getMappedId </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rt_defs_id_mapping **&#160;</td>
          <td class="paramname"><em>mapping</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>mapping_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets userId or groupId based on mappings. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Id we want to map </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mapping</td><td>Mapping that should be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mapping_len</td><td>Length of mapping</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if found mapped id, if not found initial id </dd></dl>

</div>
</div>
<a id="abce85be9193c3d63b13f9a4fb2fb0ade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce85be9193c3d63b13f9a4fb2fb0ade">&#9670;&nbsp;</a></span>getMountOwnerDetails()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classMountOwnerDetails.html">MountOwnerDetails</a> &gt; &gt; Storage::getMountOwnerDetails </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create mount owner details vector from all mount owners in config. </p>
<dl class="section return"><dt>Returns</dt><dd>vector of <a class="el" href="classMountOwnerDetails.html" title="Class that represents mount ownership and whether to apply recursively.">MountOwnerDetails</a> that were in the config </dd></dl>

</div>
</div>
<a id="a6ac60a6965e27d0867eb6583c311b891"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ac60a6965e27d0867eb6583c311b891">&#9670;&nbsp;</a></span>getMountOwners()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct__MountOwnerProperties.html">MountOwnerProperties</a> &gt; Storage::getMountOwners </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads container config to obtain source path on host, userId, groupId and recursive options. These will be used later to change ownership of the source path based on userId and groupId within the host namespace. </p>
<dl class="section return"><dt>Returns</dt><dd>vector of MountOwnerProperties that were in the config </dd></dl>

</div>
</div>
<a id="a1223e90fc2e58dcef9b6a7782d5fb72b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1223e90fc2e58dcef9b6a7782d5fb72b">&#9670;&nbsp;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Storage::name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should return the name of the plugin. </p>
<dl class="section return"><dt>Returns</dt><dd>string with the name of the hook. </dd></dl>

<p>Implements <a class="el" href="classIDobbyRdkPlugin.html#a9c41f1227b331ccec63e7a3c11534e83">IDobbyRdkPlugin</a>.</p>

</div>
</div>
<a id="a2ded5d67acaa99fd83b4d03b509191dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ded5d67acaa99fd83b4d03b509191dc">&#9670;&nbsp;</a></span>postStart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Storage::postStart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>OCI Hook - Run in container namespace. </p>
<p>OCI Hook - Run in host namespace once container has started </p>

<p>Reimplemented from <a class="el" href="classRdkPluginBase.html#af2e1681da85f73cbe1ea59325ec5c651">RdkPluginBase</a>.</p>

</div>
</div>
<a id="a5c52a77716e4c4e1a8f344987c353dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c52a77716e4c4e1a8f344987c353dc7">&#9670;&nbsp;</a></span>setupOwnerIds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Storage::setupOwnerIds </td>
          <td>(</td>
          <td class="paramtype">uid_t &amp;&#160;</td>
          <td class="paramname"><em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gid_t &amp;&#160;</td>
          <td class="paramname"><em>gid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets userId and groupId. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Id we want to map </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mapping</td><td>Mapping that should be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mapping_len</td><td>Length of mapping</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if found mapped id, if not found initial id </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rdkPlugins/Storage/source/<a class="el" href="Storage_8h_source.html">Storage.h</a></li>
<li>rdkPlugins/Storage/source/Storage.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
