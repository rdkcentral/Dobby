<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: AI_IPC::DbusEventDispatcher Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Dobby<span id="projectnumber">&#160;3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>AI_IPC</b></li><li class="navelem"><a class="el" href="classAI__IPC_1_1DbusEventDispatcher.html">DbusEventDispatcher</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classAI__IPC_1_1DbusEventDispatcher-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">AI_IPC::DbusEventDispatcher Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Event dispatcher loop, runs the thread that polls on the dbus fds.  
 <a href="classAI__IPC_1_1DbusEventDispatcher.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DbusEventDispatcher_8h_source.html">DbusEventDispatcher.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3c91058d59d8c4d752a2030d5442e62d" id="r_a3c91058d59d8c4d752a2030d5442e62d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusEventDispatcher.html#a3c91058d59d8c4d752a2030d5442e62d">startEventDispatcher</a> (DBusConnection *connection)</td></tr>
<tr class="memdesc:a3c91058d59d8c4d752a2030d5442e62d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the event dispatch thread for the given dbus connection.  <br /></td></tr>
<tr class="separator:a3c91058d59d8c4d752a2030d5442e62d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd2df31cd21dd9db0198dbf95ab9478" id="r_acdd2df31cd21dd9db0198dbf95ab9478"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusEventDispatcher.html#acdd2df31cd21dd9db0198dbf95ab9478">stopEventDispatcher</a> ()</td></tr>
<tr class="memdesc:acdd2df31cd21dd9db0198dbf95ab9478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the event dispatch thread and cleans up all file descriptors.  <br /></td></tr>
<tr class="separator:acdd2df31cd21dd9db0198dbf95ab9478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afae46dc18b257ba29a66dc2f144d3a2b" id="r_afae46dc18b257ba29a66dc2f144d3a2b"><td class="memTemplParams" colspan="2"><a id="afae46dc18b257ba29a66dc2f144d3a2b" name="afae46dc18b257ba29a66dc2f144d3a2b"></a>
template&lt;class Function , class... Args&gt; </td></tr>
<tr class="memitem:afae46dc18b257ba29a66dc2f144d3a2b"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><b>callInEventLoop</b> (Function &amp;&amp;f, Args &amp;&amp;... args)</td></tr>
<tr class="separator:afae46dc18b257ba29a66dc2f144d3a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec4fe3095a96a5a86a4fe9ddb5233e9b" id="r_aec4fe3095a96a5a86a4fe9ddb5233e9b"><td class="memTemplParams" colspan="2"><a id="aec4fe3095a96a5a86a4fe9ddb5233e9b" name="aec4fe3095a96a5a86a4fe9ddb5233e9b"></a>
template&lt;class Function &gt; </td></tr>
<tr class="memitem:aec4fe3095a96a5a86a4fe9ddb5233e9b"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><b>callInEventLoop</b> (Function func)</td></tr>
<tr class="separator:aec4fe3095a96a5a86a4fe9ddb5233e9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a99a8e87e5c08172aeed77b87eae86577" id="r_a99a8e87e5c08172aeed77b87eae86577"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusEventDispatcher.html#a99a8e87e5c08172aeed77b87eae86577">eventDispatcherThreadFn</a> ()</td></tr>
<tr class="memdesc:a99a8e87e5c08172aeed77b87eae86577"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread function that processes the events.  <br /></td></tr>
<tr class="separator:a99a8e87e5c08172aeed77b87eae86577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada48ac2040ac9c935af3e0331fd4f142" id="r_ada48ac2040ac9c935af3e0331fd4f142"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusEventDispatcher.html#ada48ac2040ac9c935af3e0331fd4f142">cleanupAllEvents</a> ()</td></tr>
<tr class="memdesc:ada48ac2040ac9c935af3e0331fd4f142"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the three eventfd's used to wake up and trigger events in the poll loop.  <br /></td></tr>
<tr class="separator:ada48ac2040ac9c935af3e0331fd4f142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae45b6b78bc84d16cfa46319cb9f6ee4f" id="r_ae45b6b78bc84d16cfa46319cb9f6ee4f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusEventDispatcher.html#ae45b6b78bc84d16cfa46319cb9f6ee4f">callInEventLoopImpl</a> (const std::function&lt; void()&gt; &amp;func)</td></tr>
<tr class="memdesc:ae45b6b78bc84d16cfa46319cb9f6ee4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the supplied function in the context of the dispatch thread.  <br /></td></tr>
<tr class="separator:ae45b6b78bc84d16cfa46319cb9f6ee4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a70c3e29100be58d56413b1f5f5476422" id="r_a70c3e29100be58d56413b1f5f5476422"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusEventDispatcher.html#a70c3e29100be58d56413b1f5f5476422">dispatchStatusCb</a> (DBusConnection *connection, DBusDispatchStatus status, void *userData)</td></tr>
<tr class="memdesc:a70c3e29100be58d56413b1f5f5476422"><td class="mdescLeft">&#160;</td><td class="mdescRight">libdbus callback when dispatch status changes.  <br /></td></tr>
<tr class="separator:a70c3e29100be58d56413b1f5f5476422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e9b64d5bdbaa8912ecccc31ae97bd6" id="r_a73e9b64d5bdbaa8912ecccc31ae97bd6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAI__IPC_1_1DbusEventDispatcher.html#a73e9b64d5bdbaa8912ecccc31ae97bd6">wakeUpCb</a> (void *userData)</td></tr>
<tr class="memdesc:a73e9b64d5bdbaa8912ecccc31ae97bd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">libdbus callback request to wake-up the event loop.  <br /></td></tr>
<tr class="separator:a73e9b64d5bdbaa8912ecccc31ae97bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab34544e520d75790b4e9ef139a94e45b" id="r_ab34544e520d75790b4e9ef139a94e45b"><td class="memItemLeft" align="right" valign="top"><a id="ab34544e520d75790b4e9ef139a94e45b" name="ab34544e520d75790b4e9ef139a94e45b"></a>
DBusConnection *&#160;</td><td class="memItemRight" valign="bottom"><b>mDbusConnection</b></td></tr>
<tr class="separator:ab34544e520d75790b4e9ef139a94e45b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd31e4fabc2b7c75516a7277dd65e57" id="r_a9dd31e4fabc2b7c75516a7277dd65e57"><td class="memItemLeft" align="right" valign="top"><a id="a9dd31e4fabc2b7c75516a7277dd65e57" name="a9dd31e4fabc2b7c75516a7277dd65e57"></a>
std::thread&#160;</td><td class="memItemRight" valign="bottom"><b>mEventDispatcherThread</b></td></tr>
<tr class="separator:a9dd31e4fabc2b7c75516a7277dd65e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae054d69212bb7f4234f68b854f0ccf67" id="r_ae054d69212bb7f4234f68b854f0ccf67"><td class="memItemLeft" align="right" valign="top"><a id="ae054d69212bb7f4234f68b854f0ccf67" name="ae054d69212bb7f4234f68b854f0ccf67"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mDeathEventFd</b></td></tr>
<tr class="separator:ae054d69212bb7f4234f68b854f0ccf67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb9704558ff0e354f02442eb04933999" id="r_abb9704558ff0e354f02442eb04933999"><td class="memItemLeft" align="right" valign="top"><a id="abb9704558ff0e354f02442eb04933999" name="abb9704558ff0e354f02442eb04933999"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mWakeupEventFd</b></td></tr>
<tr class="separator:abb9704558ff0e354f02442eb04933999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1110c560e758a72d0d8b70a1ef9971" id="r_aea1110c560e758a72d0d8b70a1ef9971"><td class="memItemLeft" align="right" valign="top"><a id="aea1110c560e758a72d0d8b70a1ef9971" name="aea1110c560e758a72d0d8b70a1ef9971"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mDispatchEventFd</b></td></tr>
<tr class="separator:aea1110c560e758a72d0d8b70a1ef9971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb221ce0acadd141d69f5e6e0db3fa2" id="r_afdb221ce0acadd141d69f5e6e0db3fa2"><td class="memItemLeft" align="right" valign="top"><a id="afdb221ce0acadd141d69f5e6e0db3fa2" name="afdb221ce0acadd141d69f5e6e0db3fa2"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>mCallCounter</b></td></tr>
<tr class="separator:afdb221ce0acadd141d69f5e6e0db3fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a866af9d41aef6637eb538c8723eea187" id="r_a866af9d41aef6637eb538c8723eea187"><td class="memItemLeft" align="right" valign="top"><a id="a866af9d41aef6637eb538c8723eea187" name="a866af9d41aef6637eb538c8723eea187"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>mCallLock</b></td></tr>
<tr class="separator:a866af9d41aef6637eb538c8723eea187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b796ed2fba50692f12a540110ed005" id="r_a89b796ed2fba50692f12a540110ed005"><td class="memItemLeft" align="right" valign="top"><a id="a89b796ed2fba50692f12a540110ed005" name="a89b796ed2fba50692f12a540110ed005"></a>
std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><b>mCallCondVar</b></td></tr>
<tr class="separator:a89b796ed2fba50692f12a540110ed005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98a2184e7c7bf6630f686f1db876293" id="r_ae98a2184e7c7bf6630f686f1db876293"><td class="memItemLeft" align="right" valign="top"><a id="ae98a2184e7c7bf6630f686f1db876293" name="ae98a2184e7c7bf6630f686f1db876293"></a>
std::queue&lt; std::pair&lt; uint64_t, std::function&lt; void()&gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mCallQueue</b></td></tr>
<tr class="separator:ae98a2184e7c7bf6630f686f1db876293"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Event dispatcher loop, runs the thread that polls on the dbus fds. </p>
<p>This class installs handlers for the four types of dbus events; watches, timeouts, wake-ups and dispatches. Watches and timeouts are a bit tricky and are handled by the <a class="el" href="classAI__IPC_1_1DbusWatches.html" title="Utility object to handle installing / removing dbus watches from the poll loop.">DbusWatches</a> and <a class="el" href="classAI__IPC_1_1DbusTimeouts.html" title="Object that manages the timeouts for a given dbus connection.">DbusTimeouts</a> objects respectively, however those objects still have a corresponding fd that are added to the poll loop managed by this dispatchers.</p>
<p>In addition the dispatcher has an API to allow you to call arbitrary functions in the context of it's dispatcher thread. This is used by the higher level <a class="el" href="classAI__IPC_1_1DbusConnection.html" title="Wraps a dbus connection pointer and runs the dispatch loop for it.">DbusConnection</a> object to make libdbus API calls on the connection from the dispatch thread, and thereby avoid the many varied race conditions in the dbus library. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae45b6b78bc84d16cfa46319cb9f6ee4f" name="ae45b6b78bc84d16cfa46319cb9f6ee4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae45b6b78bc84d16cfa46319cb9f6ee4f">&#9670;&#160;</a></span>callInEventLoopImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DbusEventDispatcher::callInEventLoopImpl </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void()&gt; &amp;&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calls the supplied function in the context of the dispatch thread. </p>
<dl class="section warning"><dt>Warning</dt><dd>Because the method is called from the context of the dispatch thread, avoid calling from an dbus callback with locks held otherwise you could end up deadlocked.</dd></dl>
<p>It is safe to call this method from inside or outside the dispatch thread; if called from within, the function is directly executed, if not in the dispatcher thread then the function is queued up and the method will block until the function has been processed within the thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">func</td><td>The function to run in the dispatcher thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the function was executed, otherwise false. </dd></dl>

</div>
</div>
<a id="ada48ac2040ac9c935af3e0331fd4f142" name="ada48ac2040ac9c935af3e0331fd4f142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada48ac2040ac9c935af3e0331fd4f142">&#9670;&#160;</a></span>cleanupAllEvents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DbusEventDispatcher::cleanupAllEvents </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Closes the three eventfd's used to wake up and trigger events in the poll loop. </p>
<p>Upon return all eventfds will be closed. </p>

</div>
</div>
<a id="a70c3e29100be58d56413b1f5f5476422" name="a70c3e29100be58d56413b1f5f5476422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70c3e29100be58d56413b1f5f5476422">&#9670;&#160;</a></span>dispatchStatusCb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DbusEventDispatcher::dispatchStatusCb </td>
          <td>(</td>
          <td class="paramtype">DBusConnection *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DBusDispatchStatus&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>libdbus callback when dispatch status changes. </p>
<p>This simply triggers the eventfd which wakes the poll loop and results in dbus_connection_dispatch() being called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connection</td><td>The dbus connection object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>The new status of the dbus loop. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">userData</td><td>Pointer to this. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99a8e87e5c08172aeed77b87eae86577" name="a99a8e87e5c08172aeed77b87eae86577"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99a8e87e5c08172aeed77b87eae86577">&#9670;&#160;</a></span>eventDispatcherThreadFn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DbusEventDispatcher::eventDispatcherThreadFn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread function that processes the events. </p>
<p>The main poll thread that processes all dbus events. </p>

</div>
</div>
<a id="a3c91058d59d8c4d752a2030d5442e62d" name="a3c91058d59d8c4d752a2030d5442e62d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c91058d59d8c4d752a2030d5442e62d">&#9670;&#160;</a></span>startEventDispatcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DbusEventDispatcher::startEventDispatcher </td>
          <td>(</td>
          <td class="paramtype">DBusConnection *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the event dispatch thread for the given dbus connection. </p>
<p>This creates the the eventfds for the wakeup, dispatch and death events. It then registers the libdbus callback functions before finally spawning the thread that runs the poll event loop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connection</td><td>The dbus connection to run the event loop for. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acdd2df31cd21dd9db0198dbf95ab9478" name="acdd2df31cd21dd9db0198dbf95ab9478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdd2df31cd21dd9db0198dbf95ab9478">&#9670;&#160;</a></span>stopEventDispatcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DbusEventDispatcher::stopEventDispatcher </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the event dispatch thread and cleans up all file descriptors. </p>
<p>Starts by removing all the libdbus callbacks and then ask the thread to terminate by triggering the death eventfd. </p>

</div>
</div>
<a id="a73e9b64d5bdbaa8912ecccc31ae97bd6" name="a73e9b64d5bdbaa8912ecccc31ae97bd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73e9b64d5bdbaa8912ecccc31ae97bd6">&#9670;&#160;</a></span>wakeUpCb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DbusEventDispatcher::wakeUpCb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>libdbus callback request to wake-up the event loop. </p>
<p>This simply triggers the eventfd which wakes the poll loop and results in dbus_connection_dispatch() being called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">userData</td><td>Pointer to this. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>AppInfrastructure/IpcService/source/libdbus/<a class="el" href="DbusEventDispatcher_8h_source.html">DbusEventDispatcher.h</a></li>
<li>AppInfrastructure/IpcService/source/libdbus/<b>DbusEventDispatcher.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
