<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: AppServicesRdkPlugin Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Dobby<span id="projectnumber">&#160;3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classAppServicesRdkPlugin-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">AppServicesRdkPlugin Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Plugin just used to map in access for AS services.  
 <a href="classAppServicesRdkPlugin.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="AppServicesRdkPlugin_8h_source.html">AppServicesRdkPlugin.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for AppServicesRdkPlugin:</div>
<div class="dyncontent">
<div class="center"><img src="classAppServicesRdkPlugin__inherit__graph.png" border="0" usemap="#aAppServicesRdkPlugin_inherit__map" alt="Inheritance graph"/></div>
<map name="aAppServicesRdkPlugin_inherit__map" id="aAppServicesRdkPlugin_inherit__map">
<area shape="rect" title="Plugin just used to map in access for AS services." alt="" coords="5,152,172,177"/>
<area shape="rect" href="classRdkPluginBase.html" title="Basic object that provides the default overrides for a plugin." alt="" coords="29,79,148,104"/>
<area shape="poly" title=" " alt="" coords="91,118,91,152,86,152,86,118"/>
<area shape="rect" href="classIDobbyRdkPlugin.html" title="Interface that plugin libraries have to implement." alt="" coords="22,5,155,31"/>
<area shape="poly" title=" " alt="" coords="91,44,91,79,86,79,86,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for AppServicesRdkPlugin:</div>
<div class="dyncontent">
<div class="center"><img src="classAppServicesRdkPlugin__coll__graph.png" border="0" usemap="#aAppServicesRdkPlugin_coll__map" alt="Collaboration graph"/></div>
<map name="aAppServicesRdkPlugin_coll__map" id="aAppServicesRdkPlugin_coll__map">
<area shape="rect" title="Plugin just used to map in access for AS services." alt="" coords="5,152,172,177"/>
<area shape="rect" href="classRdkPluginBase.html" title="Basic object that provides the default overrides for a plugin." alt="" coords="29,79,148,104"/>
<area shape="poly" title=" " alt="" coords="91,118,91,152,86,152,86,118"/>
<area shape="rect" href="classIDobbyRdkPlugin.html" title="Interface that plugin libraries have to implement." alt="" coords="22,5,155,31"/>
<area shape="poly" title=" " alt="" coords="91,44,91,79,86,79,86,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a88c72ef9c44a279246f0d83a3b74c600" id="r_a88c72ef9c44a279246f0d83a3b74c600"><td class="memItemLeft" align="right" valign="top"><a id="a88c72ef9c44a279246f0d83a3b74c600" name="a88c72ef9c44a279246f0d83a3b74c600"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AppServicesRdkPlugin</b> (std::shared_ptr&lt; rt_dobby_schema &gt; &amp;containerConfig, const std::shared_ptr&lt; <a class="el" href="classDobbyRdkPluginUtils.html">DobbyRdkPluginUtils</a> &gt; &amp;utils, const std::string &amp;rootfsPath)</td></tr>
<tr class="separator:a88c72ef9c44a279246f0d83a3b74c600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abefb38f3543f1c26743adf618e1c9761" id="r_abefb38f3543f1c26743adf618e1c9761"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#abefb38f3543f1c26743adf618e1c9761">name</a> () const override</td></tr>
<tr class="memdesc:abefb38f3543f1c26743adf618e1c9761"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return the name of the plugin.  <br /></td></tr>
<tr class="separator:abefb38f3543f1c26743adf618e1c9761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1804825e8fea39e0730f4d4e4eda11" id="r_ada1804825e8fea39e0730f4d4e4eda11"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#ada1804825e8fea39e0730f4d4e4eda11">hookHints</a> () const override</td></tr>
<tr class="memdesc:ada1804825e8fea39e0730f4d4e4eda11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the bit flags for which hooks we're going to use.  <br /></td></tr>
<tr class="separator:ada1804825e8fea39e0730f4d4e4eda11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a045cdec623ac0f1bd33557b52fbdf444" id="r_a045cdec623ac0f1bd33557b52fbdf444"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a045cdec623ac0f1bd33557b52fbdf444">postInstallation</a> () override</td></tr>
<tr class="memdesc:a045cdec623ac0f1bd33557b52fbdf444"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classDobby.html" title="The root Dobby object, runs the dbus loop.">Dobby</a> Hook - run in host namespace <em>once</em> when container bundle is downloaded Updates the /etc/services and /etc/hosts file to point to the mapped AS server.  <br /></td></tr>
<tr class="separator:a045cdec623ac0f1bd33557b52fbdf444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c3dfe4b0a31da9bb85f67dfc37dba0" id="r_af6c3dfe4b0a31da9bb85f67dfc37dba0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#af6c3dfe4b0a31da9bb85f67dfc37dba0">createRuntime</a> () override</td></tr>
<tr class="memdesc:af6c3dfe4b0a31da9bb85f67dfc37dba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">OCI Hook - Run in host namespace. Adds the two iptables firewall rules to enable port forwarding.  <br /></td></tr>
<tr class="separator:af6c3dfe4b0a31da9bb85f67dfc37dba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adec5a95b780b0aaa06f05f20cc05acd1" id="r_adec5a95b780b0aaa06f05f20cc05acd1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#adec5a95b780b0aaa06f05f20cc05acd1">postHalt</a> () override</td></tr>
<tr class="memdesc:adec5a95b780b0aaa06f05f20cc05acd1"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classDobby.html" title="The root Dobby object, runs the dbus loop.">Dobby</a> Hook - Run in host namespace when container terminates. We hook this point so we can delete the iptables firewalls rules added at container start-up.  <br /></td></tr>
<tr class="separator:adec5a95b780b0aaa06f05f20cc05acd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d70bc90c59655de0c7f0460ff9c0021" id="r_a5d70bc90c59655de0c7f0460ff9c0021"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a5d70bc90c59655de0c7f0460ff9c0021">getDependencies</a> () const override</td></tr>
<tr class="memdesc:a5d70bc90c59655de0c7f0460ff9c0021"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return the names of the plugins this plugin depends on.  <br /></td></tr>
<tr class="separator:a5d70bc90c59655de0c7f0460ff9c0021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classRdkPluginBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classRdkPluginBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classRdkPluginBase.html">RdkPluginBase</a></td></tr>
<tr class="memitem:ac4766784eaa83e35b83b817af85ea045 inherit pub_methods_classRdkPluginBase" id="r_ac4766784eaa83e35b83b817af85ea045"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRdkPluginBase.html#ac4766784eaa83e35b83b817af85ea045">preCreation</a> ()</td></tr>
<tr class="separator:ac4766784eaa83e35b83b817af85ea045 inherit pub_methods_classRdkPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adccac3990feeac6d14bb4b32fafe50b7 inherit pub_methods_classRdkPluginBase" id="r_adccac3990feeac6d14bb4b32fafe50b7"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRdkPluginBase.html#adccac3990feeac6d14bb4b32fafe50b7">createContainer</a> ()</td></tr>
<tr class="separator:adccac3990feeac6d14bb4b32fafe50b7 inherit pub_methods_classRdkPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e1681da85f73cbe1ea59325ec5c651 inherit pub_methods_classRdkPluginBase" id="r_af2e1681da85f73cbe1ea59325ec5c651"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRdkPluginBase.html#af2e1681da85f73cbe1ea59325ec5c651">postStart</a> ()</td></tr>
<tr class="separator:af2e1681da85f73cbe1ea59325ec5c651 inherit pub_methods_classRdkPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6d9df3768beed63fe0361af3bb050c inherit pub_methods_classRdkPluginBase" id="r_a5f6d9df3768beed63fe0361af3bb050c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRdkPluginBase.html#a5f6d9df3768beed63fe0361af3bb050c">postStop</a> ()</td></tr>
<tr class="separator:a5f6d9df3768beed63fe0361af3bb050c inherit pub_methods_classRdkPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7575fc87a940eedb30d68d435cddbf87 inherit pub_methods_classRdkPluginBase" id="r_a7575fc87a940eedb30d68d435cddbf87"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRdkPluginBase.html#a7575fc87a940eedb30d68d435cddbf87">getDependencies</a> () const override</td></tr>
<tr class="memdesc:a7575fc87a940eedb30d68d435cddbf87 inherit pub_methods_classRdkPluginBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return the names of the plugins this plugin depends on.  <br /></td></tr>
<tr class="separator:a7575fc87a940eedb30d68d435cddbf87 inherit pub_methods_classRdkPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a5a47eb35c74504bcb6042c48aacb2685" id="r_a5a47eb35c74504bcb6042c48aacb2685"><td class="memItemLeft" align="right" valign="top"><a id="a5a47eb35c74504bcb6042c48aacb2685" name="a5a47eb35c74504bcb6042c48aacb2685"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>LocalServicesPort</b> : in_port_t { <br />
&#160;&#160;<b>LocalServicesNone</b> = 0
, <b>LocalServicesInvalid</b> = 1
, <b>LocalServices1Port</b> = 9001
, <b>LocalServices2Port</b> = 9002
, <br />
&#160;&#160;<b>LocalServices3Port</b> = 9003
, <b>LocalServices4Port</b> = 9004
, <b>LocalServices5Port</b> = 9009
<br />
 }</td></tr>
<tr class="separator:a5a47eb35c74504bcb6042c48aacb2685"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a912db01ea800fe1aa52b30343d6ffab6" id="r_a912db01ea800fe1aa52b30343d6ffab6"><td class="memItemLeft" align="right" valign="top">LocalServicesPort&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a912db01ea800fe1aa52b30343d6ffab6">getAsPort</a> () const</td></tr>
<tr class="memdesc:a912db01ea800fe1aa52b30343d6ffab6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the AS port based on the "setMenu" config setting.  <br /></td></tr>
<tr class="separator:a912db01ea800fe1aa52b30343d6ffab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97a7e286bd92caa39aa3da60e3c3b869" id="r_a97a7e286bd92caa39aa3da60e3c3b869"><td class="memItemLeft" align="right" valign="top">std::set&lt; in_port_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a97a7e286bd92caa39aa3da60e3c3b869">getAllPorts</a> () const</td></tr>
<tr class="memdesc:a97a7e286bd92caa39aa3da60e3c3b869"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all the ports we need to forward.  <br /></td></tr>
<tr class="separator:a97a7e286bd92caa39aa3da60e3c3b869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca292af7cc15b60d90daaf6d0f46ee6" id="r_a9ca292af7cc15b60d90daaf6d0f46ee6"><td class="memItemLeft" align="right" valign="top">Netfilter::RuleSet&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a9ca292af7cc15b60d90daaf6d0f46ee6">constructRules</a> () const</td></tr>
<tr class="memdesc:a9ca292af7cc15b60d90daaf6d0f46ee6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the required iptables rules based on the container and plugin config.  <br /></td></tr>
<tr class="separator:a9ca292af7cc15b60d90daaf6d0f46ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c766b6d4f1daa841861f801847923c5" id="r_a9c766b6d4f1daa841861f801847923c5"><td class="memItemLeft" align="right" valign="top">Netfilter::RuleSet&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a9c766b6d4f1daa841861f801847923c5">constructMasqueradeRules</a> () const</td></tr>
<tr class="memdesc:a9c766b6d4f1daa841861f801847923c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs rules to forward requests to AS ports on the container localhost interface to the host.  <br /></td></tr>
<tr class="separator:a9c766b6d4f1daa841861f801847923c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3e7723218d2737b6c44201d9a5cbcb" id="r_a6f3e7723218d2737b6c44201d9a5cbcb"><td class="memItemLeft" align="right" valign="top"><a id="a6f3e7723218d2737b6c44201d9a5cbcb" name="a6f3e7723218d2737b6c44201d9a5cbcb"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>setupLocalhostMasquerade</b> (Netfilter::RuleSet &amp;ruleSet)</td></tr>
<tr class="separator:a6f3e7723218d2737b6c44201d9a5cbcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27c8b97883960845a1bfc20efd0a4c30" id="r_a27c8b97883960845a1bfc20efd0a4c30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a27c8b97883960845a1bfc20efd0a4c30">addRulesForPort</a> (const std::string &amp;containerIp, const std::string &amp;vethName, in_port_t port, std::list&lt; std::string &gt; &amp;acceptRules, std::list&lt; std::string &gt; &amp;natRules) const</td></tr>
<tr class="memdesc:a27c8b97883960845a1bfc20efd0a4c30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the ACCEPT, DNAT and CONNLIMIT iptables rules for the given port to the given rule sets.  <br /></td></tr>
<tr class="separator:a27c8b97883960845a1bfc20efd0a4c30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98a69762ff9c088f2dedbf450814bae" id="r_ae98a69762ff9c088f2dedbf450814bae"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#ae98a69762ff9c088f2dedbf450814bae">constructDNATRule</a> (const std::string &amp;containerIp, in_port_t port) const</td></tr>
<tr class="memdesc:ae98a69762ff9c088f2dedbf450814bae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a DNAT PREROUTING rule to send anything from the container on the given port to localhost outside the container.  <br /></td></tr>
<tr class="separator:ae98a69762ff9c088f2dedbf450814bae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a510cc361f6d80b7fa3cdb4b7e82fc3c5" id="r_a510cc361f6d80b7fa3cdb4b7e82fc3c5"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a510cc361f6d80b7fa3cdb4b7e82fc3c5">constructCONNLIMITRule</a> (const std::string &amp;containerIp, const std::string &amp;vethName, in_port_t port, uint32_t connLimit) const</td></tr>
<tr class="memdesc:a510cc361f6d80b7fa3cdb4b7e82fc3c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an INPUT REJECT rule to reject connection if exceed the limit.  <br /></td></tr>
<tr class="separator:a510cc361f6d80b7fa3cdb4b7e82fc3c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eaac747cf5e1b932d884f2882d7bb2a" id="r_a4eaac747cf5e1b932d884f2882d7bb2a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a4eaac747cf5e1b932d884f2882d7bb2a">constructACCEPTRule</a> (const std::string &amp;containerIp, const std::string &amp;vethName, in_port_t port) const</td></tr>
<tr class="memdesc:a4eaac747cf5e1b932d884f2882d7bb2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a INPUT ACCEPT rule to allow packets from the container over the dobby0 bridge to localhost.  <br /></td></tr>
<tr class="separator:a4eaac747cf5e1b932d884f2882d7bb2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e96c165ab1c06fc8155a6d1b189867f" id="r_a7e96c165ab1c06fc8155a6d1b189867f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#a7e96c165ab1c06fc8155a6d1b189867f">createMasqueradeDnatRule</a> (const in_port_t &amp;port) const</td></tr>
<tr class="memdesc:a7e96c165ab1c06fc8155a6d1b189867f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an OUTPUT DNAT rule to forward packets from 127.0.0.1 inside the container to the bridge device (100.64.11.1) on the given port.  <br /></td></tr>
<tr class="separator:a7e96c165ab1c06fc8155a6d1b189867f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56a17210d8b3f59bc2f514de3f75d57" id="r_ac56a17210d8b3f59bc2f514de3f75d57"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAppServicesRdkPlugin.html#ac56a17210d8b3f59bc2f514de3f75d57">createMasqueradeSnatRule</a> (const std::string &amp;ipAddress) const</td></tr>
<tr class="memdesc:ac56a17210d8b3f59bc2f514de3f75d57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an POSTROUTING SNAT rule so that the source address is changed to the veth0 inside the container so we get the replies.  <br /></td></tr>
<tr class="separator:ac56a17210d8b3f59bc2f514de3f75d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5ffed3d2b64e2d38143051cc7f8643d5" id="r_a5ffed3d2b64e2d38143051cc7f8643d5"><td class="memItemLeft" align="right" valign="top"><a id="a5ffed3d2b64e2d38143051cc7f8643d5" name="a5ffed3d2b64e2d38143051cc7f8643d5"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mName</b></td></tr>
<tr class="separator:a5ffed3d2b64e2d38143051cc7f8643d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8d0c517bca9fc921915646f5c060070" id="r_aa8d0c517bca9fc921915646f5c060070"><td class="memItemLeft" align="right" valign="top"><a id="aa8d0c517bca9fc921915646f5c060070" name="aa8d0c517bca9fc921915646f5c060070"></a>
std::shared_ptr&lt; rt_dobby_schema &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mContainerConfig</b></td></tr>
<tr class="separator:aa8d0c517bca9fc921915646f5c060070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfb7ecc48c7992908eda2252dfccea5a" id="r_adfb7ecc48c7992908eda2252dfccea5a"><td class="memItemLeft" align="right" valign="top"><a id="adfb7ecc48c7992908eda2252dfccea5a" name="adfb7ecc48c7992908eda2252dfccea5a"></a>
const std::shared_ptr&lt; <a class="el" href="classDobbyRdkPluginUtils.html">DobbyRdkPluginUtils</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mUtils</b></td></tr>
<tr class="separator:adfb7ecc48c7992908eda2252dfccea5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c197a6a6f7d5f0980ce2b1f742b6184" id="r_a5c197a6a6f7d5f0980ce2b1f742b6184"><td class="memItemLeft" align="right" valign="top"><a id="a5c197a6a6f7d5f0980ce2b1f742b6184" name="a5c197a6a6f7d5f0980ce2b1f742b6184"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mRootfsPath</b></td></tr>
<tr class="separator:a5c197a6a6f7d5f0980ce2b1f742b6184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae040207b856f936f109a6d74f2e6b283" id="r_ae040207b856f936f109a6d74f2e6b283"><td class="memItemLeft" align="right" valign="top"><a id="ae040207b856f936f109a6d74f2e6b283" name="ae040207b856f936f109a6d74f2e6b283"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mValid</b></td></tr>
<tr class="separator:ae040207b856f936f109a6d74f2e6b283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3458badc3caf38e8abf278a3a30c8102" id="r_a3458badc3caf38e8abf278a3a30c8102"><td class="memItemLeft" align="right" valign="top"><a id="a3458badc3caf38e8abf278a3a30c8102" name="a3458badc3caf38e8abf278a3a30c8102"></a>
const rt_defs_plugins_app_services_rdk_data *&#160;</td><td class="memItemRight" valign="bottom"><b>mPluginConfig</b></td></tr>
<tr class="separator:a3458badc3caf38e8abf278a3a30c8102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae885aae774b47f9cc17cf410ca1c3411" id="r_ae885aae774b47f9cc17cf410ca1c3411"><td class="memItemLeft" align="right" valign="top"><a id="ae885aae774b47f9cc17cf410ca1c3411" name="ae885aae774b47f9cc17cf410ca1c3411"></a>
std::shared_ptr&lt; <a class="el" href="classNetfilter.html">Netfilter</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mNetfilter</b></td></tr>
<tr class="separator:ae885aae774b47f9cc17cf410ca1c3411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5e2d917aa226bc4049015425a04b3a" id="r_aea5e2d917aa226bc4049015425a04b3a"><td class="memItemLeft" align="right" valign="top"><a id="aea5e2d917aa226bc4049015425a04b3a" name="aea5e2d917aa226bc4049015425a04b3a"></a>
const bool&#160;</td><td class="memItemRight" valign="bottom"><b>mEnableConnLimit</b></td></tr>
<tr class="separator:aea5e2d917aa226bc4049015425a04b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classIDobbyRdkPlugin"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classIDobbyRdkPlugin')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classIDobbyRdkPlugin.html">IDobbyRdkPlugin</a></td></tr>
<tr class="memitem:a2d3635518c5ee88a5d3fb8c9acdc0e8f inherit pub_types_classIDobbyRdkPlugin" id="r_a2d3635518c5ee88a5d3fb8c9acdc0e8f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">HintFlags</a> : unsigned { <br />
&#160;&#160;<b>PostInstallationFlag</b> = (1 &lt;&lt; 0)
, <b>PreCreationFlag</b> = (1 &lt;&lt; 1)
, <b>CreateRuntimeFlag</b> = (1 &lt;&lt; 2)
, <b>CreateContainerFlag</b> = (1 &lt;&lt; 3)
, <br />
&#160;&#160;<b>PostStartFlag</b> = (1 &lt;&lt; 5)
, <b>PostHaltFlag</b> = (1 &lt;&lt; 6)
, <b>PostStopFlag</b> = (1 &lt;&lt; 7)
, <b>Unknown</b> = 0
<br />
 }</td></tr>
<tr class="memdesc:a2d3635518c5ee88a5d3fb8c9acdc0e8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit flags that should be returned by hookHints.  <a href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">More...</a><br /></td></tr>
<tr class="separator:a2d3635518c5ee88a5d3fb8c9acdc0e8f inherit pub_types_classIDobbyRdkPlugin"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Plugin just used to map in access for AS services. </p>
<p>This plugin currently just uses iptables to setup routing to AS. However the end goal is to have this plugin talk to the asproxy daemon and create a bespoke listening socket for AS services with fine grained access control. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a27c8b97883960845a1bfc20efd0a4c30" name="a27c8b97883960845a1bfc20efd0a4c30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27c8b97883960845a1bfc20efd0a4c30">&#9670;&#160;</a></span>addRulesForPort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AppServicesRdkPlugin::addRulesForPort </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>containerIp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>vethName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::list&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>acceptRules</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::list&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>natRules</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds the ACCEPT, DNAT and CONNLIMIT iptables rules for the given port to the given rule sets. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">containerIp</td><td>The ip address inside the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vethName</td><td>The name of the veth device (outside the container). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>The port number to add the rules for. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">acceptRules</td><td>The ACCEPT rule set. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">natRules</td><td>The DNAT rule set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4eaac747cf5e1b932d884f2882d7bb2a" name="a4eaac747cf5e1b932d884f2882d7bb2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eaac747cf5e1b932d884f2882d7bb2a">&#9670;&#160;</a></span>constructACCEPTRule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string AppServicesRdkPlugin::constructACCEPTRule </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>containerIp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>vethName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a INPUT ACCEPT rule to allow packets from the container over the dobby0 bridge to localhost. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">containerIp</td><td>The ip address inside the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vethName</td><td>The name of the veth device (outside the container) that belongs to the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>The port number to add the DNAT rule for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The iptables formatted string. </dd></dl>

</div>
</div>
<a id="a510cc361f6d80b7fa3cdb4b7e82fc3c5" name="a510cc361f6d80b7fa3cdb4b7e82fc3c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a510cc361f6d80b7fa3cdb4b7e82fc3c5">&#9670;&#160;</a></span>constructCONNLIMITRule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string AppServicesRdkPlugin::constructCONNLIMITRule </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>containerIp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>vethName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>connLimit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs an INPUT REJECT rule to reject connection if exceed the limit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">containerIp</td><td>The ip address inside the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vethName</td><td>The name of the veth device (outside the container) that belongs to the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>The port number to add the DNAT rule for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The iptables formatted string. </dd></dl>

</div>
</div>
<a id="ae98a69762ff9c088f2dedbf450814bae" name="ae98a69762ff9c088f2dedbf450814bae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae98a69762ff9c088f2dedbf450814bae">&#9670;&#160;</a></span>constructDNATRule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string AppServicesRdkPlugin::constructDNATRule </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>containerIp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a DNAT PREROUTING rule to send anything from the container on the given port to localhost outside the container. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">containerIp</td><td>The ip address inside the container. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>The port number to add the DNAT rule for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The iptables formatted string. </dd></dl>

</div>
</div>
<a id="a9c766b6d4f1daa841861f801847923c5" name="a9c766b6d4f1daa841861f801847923c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c766b6d4f1daa841861f801847923c5">&#9670;&#160;</a></span>constructMasqueradeRules()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Netfilter::RuleSet AppServicesRdkPlugin::constructMasqueradeRules </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs rules to forward requests to AS ports on the container localhost interface to the host. </p>
<p>Simplified version of portForwarding code in Networking plugin</p>
<dl class="section return"><dt>Returns</dt><dd>RuleSet to configure iptables </dd></dl>

</div>
</div>
<a id="a9ca292af7cc15b60d90daaf6d0f46ee6" name="a9ca292af7cc15b60d90daaf6d0f46ee6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ca292af7cc15b60d90daaf6d0f46ee6">&#9670;&#160;</a></span>constructRules()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Netfilter::RuleSet AppServicesRdkPlugin::constructRules </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the required iptables rules based on the container and plugin config. </p>
<dl class="section return"><dt>Returns</dt><dd>The created iptables rule set. </dd></dl>

</div>
</div>
<a id="a7e96c165ab1c06fc8155a6d1b189867f" name="a7e96c165ab1c06fc8155a6d1b189867f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e96c165ab1c06fc8155a6d1b189867f">&#9670;&#160;</a></span>createMasqueradeDnatRule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string AppServicesRdkPlugin::createMasqueradeDnatRule </td>
          <td>(</td>
          <td class="paramtype">const in_port_t &amp;&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs an OUTPUT DNAT rule to forward packets from 127.0.0.1 inside the container to the bridge device (100.64.11.1) on the given port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">portForward</td><td>The port to forward.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns the created rule. </dd></dl>

</div>
</div>
<a id="ac56a17210d8b3f59bc2f514de3f75d57" name="ac56a17210d8b3f59bc2f514de3f75d57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac56a17210d8b3f59bc2f514de3f75d57">&#9670;&#160;</a></span>createMasqueradeSnatRule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string AppServicesRdkPlugin::createMasqueradeSnatRule </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ipAddress</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs an POSTROUTING SNAT rule so that the source address is changed to the veth0 inside the container so we get the replies. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ipAddress</td><td>The ip address of the container.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns the created rule. </dd></dl>

</div>
</div>
<a id="af6c3dfe4b0a31da9bb85f67dfc37dba0" name="af6c3dfe4b0a31da9bb85f67dfc37dba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6c3dfe4b0a31da9bb85f67dfc37dba0">&#9670;&#160;</a></span>createRuntime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AppServicesRdkPlugin::createRuntime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>OCI Hook - Run in host namespace. Adds the two iptables firewall rules to enable port forwarding. </p>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

<p>Reimplemented from <a class="el" href="classRdkPluginBase.html#af00763b74d9b809a46bbf025e485d010">RdkPluginBase</a>.</p>

</div>
</div>
<a id="a97a7e286bd92caa39aa3da60e3c3b869" name="a97a7e286bd92caa39aa3da60e3c3b869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97a7e286bd92caa39aa3da60e3c3b869">&#9670;&#160;</a></span>getAllPorts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; in_port_t &gt; AppServicesRdkPlugin::getAllPorts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get all the ports we need to forward. </p>
<dl class="section return"><dt>Returns</dt><dd>Set of ports on the host that the container should have access to </dd></dl>

</div>
</div>
<a id="a912db01ea800fe1aa52b30343d6ffab6" name="a912db01ea800fe1aa52b30343d6ffab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a912db01ea800fe1aa52b30343d6ffab6">&#9670;&#160;</a></span>getAsPort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppServicesRdkPlugin::LocalServicesPort AppServicesRdkPlugin::getAsPort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the AS port based on the "setMenu" config setting. </p>
<dl class="section return"><dt>Returns</dt><dd>The AS port if successful, AppServicesRdkPlugin::LocalServicesPort::LocalServicesInvalid otherwise. </dd></dl>

</div>
</div>
<a id="a5d70bc90c59655de0c7f0460ff9c0021" name="a5d70bc90c59655de0c7f0460ff9c0021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d70bc90c59655de0c7f0460ff9c0021">&#9670;&#160;</a></span>getDependencies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; AppServicesRdkPlugin::getDependencies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should return the names of the plugins this plugin depends on. </p>
<p>This can be used to determine the order in which the plugins should be processed when running hooks.</p>
<dl class="section return"><dt>Returns</dt><dd>Names of the plugins this plugin depends on. </dd></dl>

<p>Implements <a class="el" href="classIDobbyRdkPlugin.html#a35af3a4dc5668f48cef268e1bd619110">IDobbyRdkPlugin</a>.</p>

</div>
</div>
<a id="ada1804825e8fea39e0730f4d4e4eda11" name="ada1804825e8fea39e0730f4d4e4eda11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada1804825e8fea39e0730f4d4e4eda11">&#9670;&#160;</a></span>hookHints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned AppServicesRdkPlugin::hookHints </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the bit flags for which hooks we're going to use. </p>

<p>Implements <a class="el" href="classIDobbyRdkPlugin.html#aff3382d4f6fcb0e517b1c5e39efc7a59">IDobbyRdkPlugin</a>.</p>

</div>
</div>
<a id="abefb38f3543f1c26743adf618e1c9761" name="abefb38f3543f1c26743adf618e1c9761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abefb38f3543f1c26743adf618e1c9761">&#9670;&#160;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string AppServicesRdkPlugin::name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should return the name of the plugin. </p>
<dl class="section return"><dt>Returns</dt><dd>string with the name of the hook. </dd></dl>

<p>Implements <a class="el" href="classIDobbyRdkPlugin.html#a9c41f1227b331ccec63e7a3c11534e83">IDobbyRdkPlugin</a>.</p>

</div>
</div>
<a id="adec5a95b780b0aaa06f05f20cc05acd1" name="adec5a95b780b0aaa06f05f20cc05acd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adec5a95b780b0aaa06f05f20cc05acd1">&#9670;&#160;</a></span>postHalt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AppServicesRdkPlugin::postHalt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classDobby.html" title="The root Dobby object, runs the dbus loop.">Dobby</a> Hook - Run in host namespace when container terminates. We hook this point so we can delete the iptables firewalls rules added at container start-up. </p>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

<p>Reimplemented from <a class="el" href="classRdkPluginBase.html#a690f2542922c5c88a9ff4654732fea99">RdkPluginBase</a>.</p>

</div>
</div>
<a id="a045cdec623ac0f1bd33557b52fbdf444" name="a045cdec623ac0f1bd33557b52fbdf444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a045cdec623ac0f1bd33557b52fbdf444">&#9670;&#160;</a></span>postInstallation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AppServicesRdkPlugin::postInstallation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classDobby.html" title="The root Dobby object, runs the dbus loop.">Dobby</a> Hook - run in host namespace <em>once</em> when container bundle is downloaded Updates the /etc/services and /etc/hosts file to point to the mapped AS server. </p>
<p>The json data is expected (required) to be formatted like the following </p><pre class="fragment">{
    "setMenu": "local-services-1",
    "additionalPorts": [ 8123 ],
    "connLimit": 32
}
</pre><p> The 'setMenu' field is the old way of specifying which services to map into the container. It is intended that in the future fine grained API lists will be specified here.</p>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

<p>Reimplemented from <a class="el" href="classRdkPluginBase.html#afb8522eece4b1948ea815d12a1fdd08b">RdkPluginBase</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rdkPlugins/AppServices/source/<a class="el" href="AppServicesRdkPlugin_8h_source.html">AppServicesRdkPlugin.h</a></li>
<li>rdkPlugins/AppServices/source/<b>AppServicesRdkPlugin.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
