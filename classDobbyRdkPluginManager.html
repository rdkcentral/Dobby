<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: DobbyRdkPluginManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dobby
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classDobbyRdkPluginManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DobbyRdkPluginManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class that manages all the RDK plugin hook libraries.  
 <a href="classDobbyRdkPluginManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DobbyRdkPluginManager_8h_source.html">DobbyRdkPluginManager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a85b5125a31ea006b1a81a8c80b4f5b1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a85b5125a31ea006b1a81a8c80b4f5b1b">DobbyRdkPluginManager</a> (std::shared_ptr&lt; rt_dobby_schema &gt; containerConfig, const std::string &amp;rootfsPath, const std::string &amp;pluginPath, const std::shared_ptr&lt; <a class="el" href="classDobbyRdkPluginUtils.html">DobbyRdkPluginUtils</a> &gt; &amp;utils)</td></tr>
<tr class="memdesc:a85b5125a31ea006b1a81a8c80b4f5b1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create instance of DobbyRdkPlugin Manager and load all plugins that can be found in pluginPath.  <a href="classDobbyRdkPluginManager.html#a85b5125a31ea006b1a81a8c80b4f5b1b">More...</a><br /></td></tr>
<tr class="separator:a85b5125a31ea006b1a81a8c80b4f5b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f38287a75b955880ab9046aea565f99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a3f38287a75b955880ab9046aea565f99">~DobbyRdkPluginManager</a> ()</td></tr>
<tr class="separator:a3f38287a75b955880ab9046aea565f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99bec8298e6c09fafe04365bb8d3c198"><td class="memItemLeft" align="right" valign="top"><a id="a99bec8298e6c09fafe04365bb8d3c198"></a>
const std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a99bec8298e6c09fafe04365bb8d3c198">listLoadedPlugins</a> () const</td></tr>
<tr class="memdesc:a99bec8298e6c09fafe04365bb8d3c198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just return a list of all loaded plugin names. <br /></td></tr>
<tr class="separator:a99bec8298e6c09fafe04365bb8d3c198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd63f403f8bbe6bf7935dd3e22b6283d"><td class="memItemLeft" align="right" valign="top"><a id="afd63f403f8bbe6bf7935dd3e22b6283d"></a>
const std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#afd63f403f8bbe6bf7935dd3e22b6283d">listLoadedLoggers</a> () const</td></tr>
<tr class="memdesc:afd63f403f8bbe6bf7935dd3e22b6283d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just return a list of all loaded logging plugin names. <br /></td></tr>
<tr class="separator:afd63f403f8bbe6bf7935dd3e22b6283d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a517b22c97e25e3cdc43de8771d51e9bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a517b22c97e25e3cdc43de8771d51e9bf">runPlugins</a> (const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a> &amp;hookPoint, const uint timeoutMs=0) const</td></tr>
<tr class="memdesc:a517b22c97e25e3cdc43de8771d51e9bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the plugins specified in the container config at the given hook point. Returns true if all required plugins execute successfully. If non-required plugins fail or are not loaded, then it logs an error but continues running other plugins.  <a href="classDobbyRdkPluginManager.html#a517b22c97e25e3cdc43de8771d51e9bf">More...</a><br /></td></tr>
<tr class="separator:a517b22c97e25e3cdc43de8771d51e9bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cf5179f775ccf96770d368cea075cf6"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classIDobbyRdkLoggingPlugin.html">IDobbyRdkLoggingPlugin</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a6cf5179f775ccf96770d368cea075cf6">getContainerLogger</a> () const</td></tr>
<tr class="memdesc:a6cf5179f775ccf96770d368cea075cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the logging plugin specified in the container config. Each container can only have a single plugin for logging, otherwise there is a chance of conflicts whilst reading the container stdout/err.  <a href="classDobbyRdkPluginManager.html#a6cf5179f775ccf96770d368cea075cf6">More...</a><br /></td></tr>
<tr class="separator:a6cf5179f775ccf96770d368cea075cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad86ab60fff19426d2f7489d6825600cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#ad86ab60fff19426d2f7489d6825600cc">setExitStatus</a> (int status) const</td></tr>
<tr class="memdesc:ad86ab60fff19426d2f7489d6825600cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the exit status of the container.  <a href="classDobbyRdkPluginManager.html#ad86ab60fff19426d2f7489d6825600cc">More...</a><br /></td></tr>
<tr class="separator:ad86ab60fff19426d2f7489d6825600cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c0f53d1484a649237687de047ac2431"><td class="memItemLeft" align="right" valign="top"><a id="a7c0f53d1484a649237687de047ac2431"></a>
std::shared_ptr&lt; rt_dobby_schema &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>getContainerConfig</b> () const</td></tr>
<tr class="separator:a7c0f53d1484a649237687de047ac2431"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:adc9bdfd0f14bc2cc951986fbeb07586a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#adc9bdfd0f14bc2cc951986fbeb07586a">loadPlugins</a> ()</td></tr>
<tr class="memdesc:adc9bdfd0f14bc2cc951986fbeb07586a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans the given path for any shared objects that implement the plugin entry points.  <a href="classDobbyRdkPluginManager.html#adc9bdfd0f14bc2cc951986fbeb07586a">More...</a><br /></td></tr>
<tr class="separator:adc9bdfd0f14bc2cc951986fbeb07586a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9335be51f0b59516378a0d2287656a56"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a9335be51f0b59516378a0d2287656a56">preprocessPlugins</a> ()</td></tr>
<tr class="memdesc:a9335be51f0b59516378a0d2287656a56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the dependency solver and required plugins data structures.  <a href="classDobbyRdkPluginManager.html#a9335be51f0b59516378a0d2287656a56">More...</a><br /></td></tr>
<tr class="separator:a9335be51f0b59516378a0d2287656a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab158a1fe60f6eef7c70bccf3fc09ea05"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#ab158a1fe60f6eef7c70bccf3fc09ea05">executeHook</a> (const std::string &amp;pluginName, const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a> hook) const</td></tr>
<tr class="separator:ab158a1fe60f6eef7c70bccf3fc09ea05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e97d25d3fd19ac4d46e078a16cd7b37"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a0e97d25d3fd19ac4d46e078a16cd7b37">executeHookTimeout</a> (const std::string &amp;pluginName, const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a> hook, const uint timeoutMs) const</td></tr>
<tr class="separator:a0e97d25d3fd19ac4d46e078a16cd7b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53540c92d5727d511c3b766926937367"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a53540c92d5727d511c3b766926937367">HookPointToString</a> (const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a> &amp;hookPoint) const</td></tr>
<tr class="separator:a53540c92d5727d511c3b766926937367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61fde77d116892f77933dd07a1b80c96"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a61fde77d116892f77933dd07a1b80c96">implementsHook</a> (const std::string &amp;pluginName, const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a> hook) const</td></tr>
<tr class="memdesc:a61fde77d116892f77933dd07a1b80c96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a plugin implements the specified hook.  <a href="classDobbyRdkPluginManager.html#a61fde77d116892f77933dd07a1b80c96">More...</a><br /></td></tr>
<tr class="separator:a61fde77d116892f77933dd07a1b80c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dabcfc1ac832b349dbde5c8f7e80093"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a7dabcfc1ac832b349dbde5c8f7e80093">isLoaded</a> (const std::string &amp;pluginName) const</td></tr>
<tr class="memdesc:a7dabcfc1ac832b349dbde5c8f7e80093"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a plugin is loaded.  <a href="classDobbyRdkPluginManager.html#a7dabcfc1ac832b349dbde5c8f7e80093">More...</a><br /></td></tr>
<tr class="separator:a7dabcfc1ac832b349dbde5c8f7e80093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb80ace9584a52a2ab7788dc710e1a8f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#abb80ace9584a52a2ab7788dc710e1a8f">isRequired</a> (const std::string &amp;pluginName) const</td></tr>
<tr class="memdesc:abb80ace9584a52a2ab7788dc710e1a8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a plugin is required.  <a href="classDobbyRdkPluginManager.html#abb80ace9584a52a2ab7788dc710e1a8f">More...</a><br /></td></tr>
<tr class="separator:abb80ace9584a52a2ab7788dc710e1a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd32311bafae8f1b20daf7a1ad4a2a9"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classIDobbyRdkPlugin.html">IDobbyRdkPlugin</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#a3cd32311bafae8f1b20daf7a1ad4a2a9">getPlugin</a> (const std::string &amp;name) const</td></tr>
<tr class="memdesc:a3cd32311bafae8f1b20daf7a1ad4a2a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the plugin with the name, or nullptr if no plugin.  <a href="classDobbyRdkPluginManager.html#a3cd32311bafae8f1b20daf7a1ad4a2a9">More...</a><br /></td></tr>
<tr class="separator:a3cd32311bafae8f1b20daf7a1ad4a2a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accf561806e63a1484a97d16d9a944431"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classIDobbyRdkLoggingPlugin.html">IDobbyRdkLoggingPlugin</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDobbyRdkPluginManager.html#accf561806e63a1484a97d16d9a944431">getLogger</a> (const std::string &amp;name) const</td></tr>
<tr class="memdesc:accf561806e63a1484a97d16d9a944431"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the logger with the name, or nullptr if no plugin.  <a href="classDobbyRdkPluginManager.html#accf561806e63a1484a97d16d9a944431">More...</a><br /></td></tr>
<tr class="separator:accf561806e63a1484a97d16d9a944431"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2f0de1312f11a88b7a7b3799e8fcba11"><td class="memItemLeft" align="right" valign="top"><a id="a2f0de1312f11a88b7a7b3799e8fcba11"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mValid</b></td></tr>
<tr class="separator:a2f0de1312f11a88b7a7b3799e8fcba11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49cdac084ce0a3927a2359b62e4701ee"><td class="memItemLeft" align="right" valign="top"><a id="a49cdac084ce0a3927a2359b62e4701ee"></a>
std::map&lt; std::string, std::pair&lt; void *, std::shared_ptr&lt; <a class="el" href="classIDobbyRdkLoggingPlugin.html">IDobbyRdkLoggingPlugin</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mLoggers</b></td></tr>
<tr class="separator:a49cdac084ce0a3927a2359b62e4701ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82cc938cdd7e21fe02f76349a38a1b09"><td class="memItemLeft" align="right" valign="top"><a id="a82cc938cdd7e21fe02f76349a38a1b09"></a>
std::map&lt; std::string, std::pair&lt; void *, std::shared_ptr&lt; <a class="el" href="classIDobbyRdkPlugin.html">IDobbyRdkPlugin</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mPlugins</b></td></tr>
<tr class="separator:a82cc938cdd7e21fe02f76349a38a1b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd42bf22d2207caef5db3a9f4e6a98b1"><td class="memItemLeft" align="right" valign="top"><a id="acd42bf22d2207caef5db3a9f4e6a98b1"></a>
std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mRequiredPlugins</b></td></tr>
<tr class="separator:acd42bf22d2207caef5db3a9f4e6a98b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ca00428273ceab9b357a14b9e9ce3a"><td class="memItemLeft" align="right" valign="top"><a id="ae8ca00428273ceab9b357a14b9e9ce3a"></a>
std::shared_ptr&lt; rt_dobby_schema &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mContainerConfig</b></td></tr>
<tr class="separator:ae8ca00428273ceab9b357a14b9e9ce3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18687b938b14f610d2a30fd8bc03f30d"><td class="memItemLeft" align="right" valign="top"><a id="a18687b938b14f610d2a30fd8bc03f30d"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mRootfsPath</b></td></tr>
<tr class="separator:a18687b938b14f610d2a30fd8bc03f30d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00d12ce35798e5b7a976732b56edae77"><td class="memItemLeft" align="right" valign="top"><a id="a00d12ce35798e5b7a976732b56edae77"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mPluginPath</b></td></tr>
<tr class="separator:a00d12ce35798e5b7a976732b56edae77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c6caed371605ace6feee5948dbcdb6"><td class="memItemLeft" align="right" valign="top"><a id="a92c6caed371605ace6feee5948dbcdb6"></a>
const std::shared_ptr&lt; <a class="el" href="classDobbyRdkPluginUtils.html">DobbyRdkPluginUtils</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mUtils</b></td></tr>
<tr class="separator:a92c6caed371605ace6feee5948dbcdb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a724f72d6be8d9361824c9deec3e2cc5e"><td class="memItemLeft" align="right" valign="top"><a id="a724f72d6be8d9361824c9deec3e2cc5e"></a>
std::unique_ptr&lt; <a class="el" href="classDobbyRdkPluginDependencySolver.html">DobbyRdkPluginDependencySolver</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mDependencySolver</b></td></tr>
<tr class="separator:a724f72d6be8d9361824c9deec3e2cc5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that manages all the RDK plugin hook libraries. </p>
<p>At creation time it loads all the plugin libraries. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a85b5125a31ea006b1a81a8c80b4f5b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b5125a31ea006b1a81a8c80b4f5b1b">&#9670;&nbsp;</a></span>DobbyRdkPluginManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DobbyRdkPluginManager::DobbyRdkPluginManager </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; rt_dobby_schema &gt;&#160;</td>
          <td class="paramname"><em>containerConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pluginPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classDobbyRdkPluginUtils.html">DobbyRdkPluginUtils</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>utils</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create instance of DobbyRdkPlugin Manager and load all plugins that can be found in pluginPath. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">containerConfig</td><td>Pointer to the libocispec struct for the container config </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pluginPath</td><td>Where to search for plugins </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3f38287a75b955880ab9046aea565f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f38287a75b955880ab9046aea565f99">&#9670;&nbsp;</a></span>~DobbyRdkPluginManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DobbyRdkPluginManager::~DobbyRdkPluginManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unload all plugins on destruction </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab158a1fe60f6eef7c70bccf3fc09ea05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab158a1fe60f6eef7c70bccf3fc09ea05">&#9670;&nbsp;</a></span>executeHook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyRdkPluginManager::executeHook </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pluginName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a>&#160;</td>
          <td class="paramname"><em>hook</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Runs the specified hook for a given plugin</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pluginName</td><td>Name of the plugin to run </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hook</td><td>Which hook to execute</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the hook executed successfully </dd></dl>

</div>
</div>
<a id="a0e97d25d3fd19ac4d46e078a16cd7b37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e97d25d3fd19ac4d46e078a16cd7b37">&#9670;&nbsp;</a></span>executeHookTimeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyRdkPluginManager::executeHookTimeout </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pluginName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a>&#160;</td>
          <td class="paramname"><em>hook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint&#160;</td>
          <td class="paramname"><em>timeoutMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Runs the specified hook for a given plugin, checks if execution takes less than timeoutMs value, and if so kills the process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pluginName</td><td>Name of the plugin to run </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hook</td><td>Which hook to execute </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeoutMs</td><td>Timeout value in miliseconds</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the hook executed successfully </dd></dl>

</div>
</div>
<a id="a6cf5179f775ccf96770d368cea075cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cf5179f775ccf96770d368cea075cf6">&#9670;&nbsp;</a></span>getContainerLogger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classIDobbyRdkLoggingPlugin.html">IDobbyRdkLoggingPlugin</a> &gt; DobbyRdkPluginManager::getContainerLogger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the logging plugin specified in the container config. Each container can only have a single plugin for logging, otherwise there is a chance of conflicts whilst reading the container stdout/err. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name of the plugin.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The logging plugin </dd></dl>

</div>
</div>
<a id="accf561806e63a1484a97d16d9a944431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accf561806e63a1484a97d16d9a944431">&#9670;&nbsp;</a></span>getLogger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classIDobbyRdkLoggingPlugin.html">IDobbyRdkLoggingPlugin</a> &gt; DobbyRdkPluginManager::getLogger </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the logger with the name, or nullptr if no plugin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name of the plugin.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The plugin interface shared pointer. </dd></dl>

</div>
</div>
<a id="a3cd32311bafae8f1b20daf7a1ad4a2a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd32311bafae8f1b20daf7a1ad4a2a9">&#9670;&nbsp;</a></span>getPlugin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classIDobbyRdkPlugin.html">IDobbyRdkPlugin</a> &gt; DobbyRdkPluginManager::getPlugin </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the plugin with the name, or nullptr if no plugin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name of the plugin.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The plugin interface shared pointer. </dd></dl>

</div>
</div>
<a id="a53540c92d5727d511c3b766926937367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53540c92d5727d511c3b766926937367">&#9670;&nbsp;</a></span>HookPointToString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string DobbyRdkPluginManager::HookPointToString </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a> &amp;&#160;</td>
          <td class="paramname"><em>hookPoint</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts hook point into human readable string</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hook</td><td>Which hook to translate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::string with representation, empty if not found. </dd></dl>

</div>
</div>
<a id="a61fde77d116892f77933dd07a1b80c96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61fde77d116892f77933dd07a1b80c96">&#9670;&nbsp;</a></span>implementsHook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyRdkPluginManager::implementsHook </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pluginName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a>&#160;</td>
          <td class="paramname"><em>hook</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a plugin implements the specified hook. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pluginName</td><td>The name of the plugin to check </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hook</td><td>The hook to check if the plugin implements</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if plugin implements specified hook </dd></dl>

</div>
</div>
<a id="a7dabcfc1ac832b349dbde5c8f7e80093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dabcfc1ac832b349dbde5c8f7e80093">&#9670;&nbsp;</a></span>isLoaded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyRdkPluginManager::isLoaded </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pluginName</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a plugin is loaded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pluginName</td><td>The name of the plugin to check.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if a plugin is loaded, false if not. </dd></dl>

</div>
</div>
<a id="abb80ace9584a52a2ab7788dc710e1a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb80ace9584a52a2ab7788dc710e1a8f">&#9670;&nbsp;</a></span>isRequired()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyRdkPluginManager::isRequired </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pluginName</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a plugin is required. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pluginName</td><td>The name of the plugin to check.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if a plugin is required, false if not. </dd></dl>

</div>
</div>
<a id="adc9bdfd0f14bc2cc951986fbeb07586a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc9bdfd0f14bc2cc951986fbeb07586a">&#9670;&nbsp;</a></span>loadPlugins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyRdkPluginManager::loadPlugins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scans the given path for any shared objects that implement the plugin entry points. </p>
<p>This calls dlopen() on all the executable files in the given path (although it doesn't recurse into subdirs), if the file has symbols createIDobbyRdkPlugin and destroyIDobbyRdkPlugin then it's deemed to be a 'rdk' plugin.</p>
<p>If loaded successfully the plugins are stored in an internal map, keyed off the plugin name.</p>
<dl class="section return"><dt>Returns</dt><dd>False if unable to open the given directory, true otherwise. </dd></dl>

</div>
</div>
<a id="a9335be51f0b59516378a0d2287656a56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9335be51f0b59516378a0d2287656a56">&#9670;&nbsp;</a></span>preprocessPlugins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyRdkPluginManager::preprocessPlugins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares the dependency solver and required plugins data structures. </p>
<p>This method scans the container config and based on its contents:</p><ol type="1">
<li>Adds all the plugins, along with their dependencies, to the plugin dependency solver,</li>
<li>Creates a list of the required plugins,</li>
<li>Checks if the required plugins are loaded.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>False if a required plugin is not loaded or if one of the dependencies is not a known plugin. True otherwise. </dd></dl>

</div>
</div>
<a id="a517b22c97e25e3cdc43de8771d51e9bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a517b22c97e25e3cdc43de8771d51e9bf">&#9670;&nbsp;</a></span>runPlugins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DobbyRdkPluginManager::runPlugins </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIDobbyRdkPlugin.html#a2d3635518c5ee88a5d3fb8c9acdc0e8f">IDobbyRdkPlugin::HintFlags</a> &amp;&#160;</td>
          <td class="paramname"><em>hookPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint&#160;</td>
          <td class="paramname"><em>timeoutMs</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the plugins specified in the container config at the given hook point. Returns true if all required plugins execute successfully. If non-required plugins fail or are not loaded, then it logs an error but continues running other plugins. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hookPoint</td><td>Which hook point to execute </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeoutMs</td><td>Timeout in miliseconds, if 0 (default value) then there will be no timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if all required plugins ran successfully </dd></dl>

</div>
</div>
<a id="ad86ab60fff19426d2f7489d6825600cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad86ab60fff19426d2f7489d6825600cc">&#9670;&nbsp;</a></span>setExitStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DobbyRdkPluginManager::setExitStatus </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the exit status of the container. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>The exit status of the container.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>pluginLauncher/lib/include/<a class="el" href="DobbyRdkPluginManager_8h_source.html">DobbyRdkPluginManager.h</a></li>
<li>pluginLauncher/lib/source/DobbyRdkPluginManager.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
