<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: EthanLogPlugin Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Dobby<span id="projectnumber">&#160;3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classEthanLogPlugin-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">EthanLogPlugin Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Plugin library that create a DIAG logging pipe for a container.  
 <a href="classEthanLogPlugin.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="EthanLogPlugin_8h_source.html">EthanLogPlugin.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for EthanLogPlugin:</div>
<div class="dyncontent">
<div class="center"><img src="classEthanLogPlugin__inherit__graph.png" border="0" usemap="#aEthanLogPlugin_inherit__map" alt="Inheritance graph"/></div>
<map name="aEthanLogPlugin_inherit__map" id="aEthanLogPlugin_inherit__map">
<area shape="rect" title="Plugin library that create a DIAG logging pipe for a container." alt="" coords="5,152,128,177"/>
<area shape="rect" href="classPluginBase.html" title="Basic object that provides the default overrides for a plugin." alt="" coords="19,79,114,104"/>
<area shape="poly" title=" " alt="" coords="69,118,69,152,64,152,64,118"/>
<area shape="rect" href="classIDobbyPlugin.html" title="Interface that plugin libraries have to implement." alt="" coords="13,5,121,31"/>
<area shape="poly" title=" " alt="" coords="69,44,69,79,64,79,64,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for EthanLogPlugin:</div>
<div class="dyncontent">
<div class="center"><img src="classEthanLogPlugin__coll__graph.png" border="0" usemap="#aEthanLogPlugin_coll__map" alt="Collaboration graph"/></div>
<map name="aEthanLogPlugin_coll__map" id="aEthanLogPlugin_coll__map">
<area shape="rect" title="Plugin library that create a DIAG logging pipe for a container." alt="" coords="5,152,128,177"/>
<area shape="rect" href="classPluginBase.html" title="Basic object that provides the default overrides for a plugin." alt="" coords="19,79,114,104"/>
<area shape="poly" title=" " alt="" coords="69,118,69,152,64,152,64,118"/>
<area shape="rect" href="classIDobbyPlugin.html" title="Interface that plugin libraries have to implement." alt="" coords="13,5,121,31"/>
<area shape="poly" title=" " alt="" coords="69,44,69,79,64,79,64,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ada7eb5d89f1e8c5cf6aa831ec6de09e7" id="r_ada7eb5d89f1e8c5cf6aa831ec6de09e7"><td class="memItemLeft" align="right" valign="top"><a id="ada7eb5d89f1e8c5cf6aa831ec6de09e7" name="ada7eb5d89f1e8c5cf6aa831ec6de09e7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>EthanLogPlugin</b> (const std::shared_ptr&lt; <a class="el" href="classIDobbyEnv.html">IDobbyEnv</a> &gt; &amp;env, const std::shared_ptr&lt; <a class="el" href="classIDobbyUtils__v3.html">IDobbyUtils</a> &gt; &amp;utils)</td></tr>
<tr class="separator:ada7eb5d89f1e8c5cf6aa831ec6de09e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f66463b982fa407e5c48a3dfd64e37d" id="r_a8f66463b982fa407e5c48a3dfd64e37d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEthanLogPlugin.html#a8f66463b982fa407e5c48a3dfd64e37d">name</a> () const final</td></tr>
<tr class="memdesc:a8f66463b982fa407e5c48a3dfd64e37d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boilerplate that just returns the name of the hook.  <br /></td></tr>
<tr class="separator:a8f66463b982fa407e5c48a3dfd64e37d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9df344ca210e9f46c0c4ae4309ba09ad" id="r_a9df344ca210e9f46c0c4ae4309ba09ad"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEthanLogPlugin.html#a9df344ca210e9f46c0c4ae4309ba09ad">hookHints</a> () const final</td></tr>
<tr class="memdesc:a9df344ca210e9f46c0c4ae4309ba09ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates which hook points we want and whether to run the asynchronously or synchronously with the other hooks.  <br /></td></tr>
<tr class="separator:a9df344ca210e9f46c0c4ae4309ba09ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c0386ad9e4afc57f54e24f286d20e2" id="r_ae3c0386ad9e4afc57f54e24f286d20e2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEthanLogPlugin.html#ae3c0386ad9e4afc57f54e24f286d20e2">postConstruction</a> (const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, const std::shared_ptr&lt; <a class="el" href="classIDobbyStartState.html">IDobbyStartState</a> &gt; &amp;startupState, const std::string &amp;rootfsPath, const Json::Value &amp;jsonData) final</td></tr>
<tr class="memdesc:ae3c0386ad9e4afc57f54e24f286d20e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">We hook the postConstruction point to create a logging pipe for the container which we then given to the init process of the container.  <br /></td></tr>
<tr class="separator:ae3c0386ad9e4afc57f54e24f286d20e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a8ce5f46b59e13eb286c1b5037b441" id="r_a01a8ce5f46b59e13eb286c1b5037b441"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEthanLogPlugin.html#a01a8ce5f46b59e13eb286c1b5037b441">preStart</a> (const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, pid_t pid, const std::string &amp;rootfsPath, const Json::Value &amp;jsonData) final</td></tr>
<tr class="memdesc:a01a8ce5f46b59e13eb286c1b5037b441"><td class="mdescLeft">&#160;</td><td class="mdescRight">We hook the preStart point so we can tell the EthanLog code the base pid of the container.  <br /></td></tr>
<tr class="separator:a01a8ce5f46b59e13eb286c1b5037b441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classPluginBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classPluginBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classPluginBase.html">PluginBase</a></td></tr>
<tr class="memitem:a208cf211e3c53dfc2bdf52841fd573be inherit pub_methods_classPluginBase" id="r_a208cf211e3c53dfc2bdf52841fd573be"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPluginBase.html#a208cf211e3c53dfc2bdf52841fd573be">postStart</a> (const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, pid_t pid, const std::string &amp;rootfsPath, const Json::Value &amp;jsonData) override</td></tr>
<tr class="memdesc:a208cf211e3c53dfc2bdf52841fd573be inherit pub_methods_classPluginBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook function called after the container is started and the init process is now running.  <br /></td></tr>
<tr class="separator:a208cf211e3c53dfc2bdf52841fd573be inherit pub_methods_classPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af402d32b6f76fb26bf195c1888ca7bb1 inherit pub_methods_classPluginBase" id="r_af402d32b6f76fb26bf195c1888ca7bb1"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPluginBase.html#af402d32b6f76fb26bf195c1888ca7bb1">postStop</a> (const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, const std::string &amp;rootfsPath, const Json::Value &amp;jsonData) override</td></tr>
<tr class="memdesc:af402d32b6f76fb26bf195c1888ca7bb1 inherit pub_methods_classPluginBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook function called after the container has stopped.  <br /></td></tr>
<tr class="separator:af402d32b6f76fb26bf195c1888ca7bb1 inherit pub_methods_classPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a621b37e0667f739486573fbaa5b6c723 inherit pub_methods_classPluginBase" id="r_a621b37e0667f739486573fbaa5b6c723"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPluginBase.html#a621b37e0667f739486573fbaa5b6c723">preDestruction</a> (const <a class="el" href="classContainerId.html">ContainerId</a> &amp;id, const std::string &amp;rootfsPath, const Json::Value &amp;jsonData) override</td></tr>
<tr class="memdesc:a621b37e0667f739486573fbaa5b6c723 inherit pub_methods_classPluginBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook function called just before the rootfs is deleted, this is called even if there was an error starting the container.  <br /></td></tr>
<tr class="separator:a621b37e0667f739486573fbaa5b6c723 inherit pub_methods_classPluginBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a0a10e4c2cee13d5c3ab82f88cecaf3de" id="r_a0a10e4c2cee13d5c3ab82f88cecaf3de"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEthanLogPlugin.html#a0a10e4c2cee13d5c3ab82f88cecaf3de">parseLogLevels</a> (const Json::Value &amp;jsonArray) const</td></tr>
<tr class="memdesc:a0a10e4c2cee13d5c3ab82f88cecaf3de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the supplied json array and returns a bitmask of the log levels.  <br /></td></tr>
<tr class="separator:a0a10e4c2cee13d5c3ab82f88cecaf3de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a9b1efc0048978c999ab0861112556d81" id="r_a9b1efc0048978c999ab0861112556d81"><td class="memItemLeft" align="right" valign="top"><a id="a9b1efc0048978c999ab0861112556d81" name="a9b1efc0048978c999ab0861112556d81"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mName</b></td></tr>
<tr class="separator:a9b1efc0048978c999ab0861112556d81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8406fa2bd5f98c2ae20320c8dd7246f" id="r_ae8406fa2bd5f98c2ae20320c8dd7246f"><td class="memItemLeft" align="right" valign="top"><a id="ae8406fa2bd5f98c2ae20320c8dd7246f" name="ae8406fa2bd5f98c2ae20320c8dd7246f"></a>
const std::shared_ptr&lt; <a class="el" href="classIDobbyUtils__v3.html">IDobbyUtils</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mUtilities</b></td></tr>
<tr class="separator:ae8406fa2bd5f98c2ae20320c8dd7246f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e60a884d63b8ebffa7d8535bf5bdb2" id="r_a37e60a884d63b8ebffa7d8535bf5bdb2"><td class="memItemLeft" align="right" valign="top"><a id="a37e60a884d63b8ebffa7d8535bf5bdb2" name="a37e60a884d63b8ebffa7d8535bf5bdb2"></a>
const std::shared_ptr&lt; <a class="el" href="classEthanLogLoop.html">EthanLogLoop</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mLogLoop</b></td></tr>
<tr class="separator:a37e60a884d63b8ebffa7d8535bf5bdb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a758e9c43ac5b4bc4dad370ff827fd25e" id="r_a758e9c43ac5b4bc4dad370ff827fd25e"><td class="memItemLeft" align="right" valign="top"><a id="a758e9c43ac5b4bc4dad370ff827fd25e" name="a758e9c43ac5b4bc4dad370ff827fd25e"></a>
const unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>mDefaultLogLevelsMask</b></td></tr>
<tr class="separator:a758e9c43ac5b4bc4dad370ff827fd25e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf54669ffe18144a461b238f331199c" id="r_a3cf54669ffe18144a461b238f331199c"><td class="memItemLeft" align="right" valign="top"><a id="a3cf54669ffe18144a461b238f331199c" name="a3cf54669ffe18144a461b238f331199c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mDevNullFd</b></td></tr>
<tr class="separator:a3cf54669ffe18144a461b238f331199c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classIDobbyPlugin"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classIDobbyPlugin')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classIDobbyPlugin.html">IDobbyPlugin</a></td></tr>
<tr class="memitem:aae38a6ab99d6a815be198ff17f0dfacd inherit pub_types_classIDobbyPlugin" id="r_aae38a6ab99d6a815be198ff17f0dfacd"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIDobbyPlugin.html#aae38a6ab99d6a815be198ff17f0dfacd">HintFlags</a> : unsigned { <br />
&#160;&#160;<b>PostConstructionSync</b> = (1 &lt;&lt; 0)
, <b>PreStartSync</b> = (1 &lt;&lt; 1)
, <b>PostStartSync</b> = (1 &lt;&lt; 2)
, <b>PostStopSync</b> = (1 &lt;&lt; 3)
, <br />
&#160;&#160;<b>PreDestructionSync</b> = (1 &lt;&lt; 4)
, <b>PostConstructionAsync</b> = (1 &lt;&lt; 16)
, <b>PreStartAsync</b> = (1 &lt;&lt; 17)
, <b>PostStartAsync</b> = (1 &lt;&lt; 18)
, <br />
&#160;&#160;<b>PostStopAsync</b> = (1 &lt;&lt; 19)
, <b>PreDestructionAsync</b> = (1 &lt;&lt; 20)
<br />
 }</td></tr>
<tr class="memdesc:aae38a6ab99d6a815be198ff17f0dfacd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit flags that should be returned by hookHints.  <a href="classIDobbyPlugin.html#aae38a6ab99d6a815be198ff17f0dfacd">More...</a><br /></td></tr>
<tr class="separator:aae38a6ab99d6a815be198ff17f0dfacd inherit pub_types_classIDobbyPlugin"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Plugin library that create a DIAG logging pipe for a container. </p>
<p>This plugin uses the IPC / DBUS fusion interface to request a new logging pipe from APP_Process (the AI AppLogger component). The write end of the pipe file descriptor is then inserted into the container and an environment variable is set with the number of the fd. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9df344ca210e9f46c0c4ae4309ba09ad" name="a9df344ca210e9f46c0c4ae4309ba09ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9df344ca210e9f46c0c4ae4309ba09ad">&#9670;&#160;</a></span>hookHints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned EthanLogPlugin::hookHints </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates which hook points we want and whether to run the asynchronously or synchronously with the other hooks. </p>
<p>For this plugin everything is done in the postConstruction and preStart hooks and synchronously with any other plugins / hooks. </p>

<p>Implements <a class="el" href="classIDobbyPlugin.html#ad44f4df1de4848fa3d43066760329e3a">IDobbyPlugin</a>.</p>

</div>
</div>
<a id="a8f66463b982fa407e5c48a3dfd64e37d" name="a8f66463b982fa407e5c48a3dfd64e37d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f66463b982fa407e5c48a3dfd64e37d">&#9670;&#160;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string EthanLogPlugin::name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Boilerplate that just returns the name of the hook. </p>
<p>This string needs to match the name specified in the container spec json. </p>

<p>Implements <a class="el" href="classIDobbyPlugin.html#adf25d402500239a690246da6fc312a7b">IDobbyPlugin</a>.</p>

</div>
</div>
<a id="a0a10e4c2cee13d5c3ab82f88cecaf3de" name="a0a10e4c2cee13d5c3ab82f88cecaf3de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a10e4c2cee13d5c3ab82f88cecaf3de">&#9670;&#160;</a></span>parseLogLevels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned EthanLogPlugin::parseLogLevels </td>
          <td>(</td>
          <td class="paramtype">const Json::Value &amp;&#160;</td>
          <td class="paramname"><em>jsonArray</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parses the supplied json array and returns a bitmask of the log levels. </p>
<p>The json object should be an array of strings which may contain any of the following strings </p><pre class="fragment">"default", "fatal", "error", "warning", "info", "debug", "milestone"
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">jsonArray</td><td>The json array object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the bitmask of log levels, maybe 0 if the array was empty. </dd></dl>

</div>
</div>
<a id="ae3c0386ad9e4afc57f54e24f286d20e2" name="ae3c0386ad9e4afc57f54e24f286d20e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3c0386ad9e4afc57f54e24f286d20e2">&#9670;&#160;</a></span>postConstruction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EthanLogPlugin::postConstruction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classContainerId.html">ContainerId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classIDobbyStartState.html">IDobbyStartState</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>startupState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Json::Value &amp;&#160;</td>
          <td class="paramname"><em>jsonData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We hook the postConstruction point to create a logging pipe for the container which we then given to the init process of the container. </p>
<p>The json for the plugin data should be formatted like so </p><pre class="fragment">{
    "name" : "SomeApp",
    "loglevels" : [ "fatal", "milestone", "info", "debug" ],
    "rateLimit" { "rate": 1234, "burstSize": 12345 }
}
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startupState</td><td>The startup state of the container (ignored) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rootfsPath</td><td>The absolute path to the rootfs of the container </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jsonData</td><td>The json data from the spec file (ignored)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the hardlink ws created, otherwise false. </dd></dl>

<p>Reimplemented from <a class="el" href="classPluginBase.html#ae713819ad289f213ce5b5a9cb099f9b7">PluginBase</a>.</p>

</div>
</div>
<a id="a01a8ce5f46b59e13eb286c1b5037b441" name="a01a8ce5f46b59e13eb286c1b5037b441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01a8ce5f46b59e13eb286c1b5037b441">&#9670;&#160;</a></span>preStart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EthanLogPlugin::preStart </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classContainerId.html">ContainerId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rootfsPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Json::Value &amp;&#160;</td>
          <td class="paramname"><em>jsonData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We hook the preStart point so we can tell the EthanLog code the base pid of the container. </p>
<p>We need this because the logging library reports it's own pid and that is relative to it's own pid namespace.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The id of the container </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pid</td><td>The pid of the init process inside the container </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rootfsPath</td><td>The absolute path to the rootfs of the container </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jsonData</td><td>The json data from the spec file (ignored)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always return true. </dd></dl>

<p>Reimplemented from <a class="el" href="classPluginBase.html#ae684b4cb9b9180474184687c493d4f84">PluginBase</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>plugins/EthanLog/source/<a class="el" href="EthanLogPlugin_8h_source.html">EthanLogPlugin.h</a></li>
<li>plugins/EthanLog/source/<b>EthanLogPlugin.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
